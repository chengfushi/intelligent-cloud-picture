{"nodes":[{"block_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","block_type":1,"children":["GstjdxwOHowlPwxyFxYcWStBneh","L0HydWgU9oKXd8xi5ECc4GUknEg","UpDCdnlGPoNbZQxmH8wcVfNfnih","OD5ndM4wcouclHxYbwtcEL1EnEb","IJcbd7POxoKY1nxP1JXcpl6anzb","RSD7dtf16otmQJxkH5UcZD5Xn1c","ELIfdJ1X2oYvKSxpfSTcOOA8nde","D6KPdJCPOoT6lnxwF2JcQ7jBnzE","O12odw1GUotApOxq4yAcuJSvn5h","HduVdJ3Zjocjbfx6UoRcVmN9n6b","Lpz5dHXKvohyRJxTR6Bcc2ptnSb","IuOMdFrUXo6ml9xD6LIc7ZuQnAc","GK0Vd5m3soOqQ9xXchncpSZrnOb","H71idHTpMoyiOBxE1PCcz4iDnLb","VNvgdP3yAodqSMxW41Qc3KhVnFg","Kz3tdB2ZgoHfydxGxA3cO0rZnkF","UXvVd2pIYonTkNxQIzBcvtEancf","PSuFdMPBqorr4TxOG8ncJCrhnug","WefmdP2YSovyAnxX2QhcdwMbneb","TMAFdiygxoKaVvxyQNgcJPAqnng","KeYNdRveYo32Emxkn7vcZuHKnid","ZQrjdsZXMoBfJhx4JcVc22YynNe","RCeFdSnMuo9epVxuti4cfgF4nPg","P6WNdBWFcotjbHxiFA5cNZQ9nSb","QhyKdnqacosFPFxKJ97c8o0tnDh","XMjJdz3wWoXbR7xrqhCcAilJnLX","Xilbdn0vRoa8bhx95rMcCfUFncg","OyCBdYeOeoVDD7x3w17c4CEBncb","JrfOdrVCXo0WNIxlh6wcWFYInyd","EIggdD2H3oq9IpxnjjMc2obwnLh","JX3qdvERFoAcgvxJcFUcpC2EnNc","V6fldpcvIoSa1xxODQgc0JgknZg","CIQxdMX7hoWrrTxZBaQcM1bKnth","TJT8d5whaoJIdQxx3uucDJVhnYf","Aty8dFep8oOhvlxf1QGcbSXtnOf","Lsm8dMqK0okVP5xgK4xcX9ORnMO","QLdsd0BQeoPxixxd5yMcqQTDn2c","TehHdbVztoxYbDxBAmccVGw7nSh","QwERduzPho37CbxJKXecnB2FnJf","YYqidDwAro4xvnxQSOvcaoULnfm","CnbNdEIAsoV0zGxdzUOcb1qBnEd","Yf6ndkBbJoVAuOxBpF3cOfurnxe","KQIPd30Xqo13iwxVjWecjGxRnPg","YkRPdq3SAouh2exhDwAcsaqjn4f","D1j8dEgIropq8HxTqkWcBnq3nde","SyfbdWHXpoXxDxxrguDcm961nWh","TEZ0dZaq6oLe54xd8iBc70XSnze","WaLCdYr6Loee2wx5YZLcF2o6nzW","CeRfdI4qQo82IsxJiFLcg05KnoG","WyOSdt6KRomNs6xBWARcAFwrnVb","JswxdQNiOoeQ7NxfyNHcc83vn7e","PJVTdY5mJoJk7Tx0c9bcnJPTnZd","OuKTdt4nWo1XGCxmCVMc6wV6n4b","YpTHdqlnaoqUKpxndQocFwOGnmg","HViMdnATUoeDfJxN33rc2yktnpb","Mn8Udr0b7o2efSxZ0bqceQq4noc","WYE2dcWeUof9C4xBiiccTKdPnXd","AL6GdlW5ioFDVsxoonVcOXMTnQd","Td8gdxJKco1IhyxQxVRcSkd6nPf","Lf18dXdFuofNQHxKa3ecLLS7nZf","E5lcduSiLoEvxzxpJlZc1lH6n9d","Kmx2dNxReoF01sxCWjdcwQU2nXe","UEbKdV0M8o0hvbxoB3gclyIlnvf","J5D3dPAJloK9Ovx8ggfcf92fnMe","GUBqdBaXnoHdBixmWw9c5AO0nCb","GihEdahFUoznoMxjZF1ccvisnlf","EhxfdAz78oZZ0GxxDkYcitVMnud","SVPDduIDZoYfatxXsCIcia0Pncd","Gt8VdyOffoTUxFx0Do8c3lpNnNg","TsujdEsXToXxFBxhgLLcDbSqnLf","GLf6d0mn7ohRClxvw6ScRhWdnXf","BggldTr9CoD0rRxYAHncSmnmnzb","JWEcd5CkNoCDopx3HZocVZhJnOb","URLNdiawbo44vzxaqqFc8rFgnkd","ZpysdLEGmozAqIxYi3ycAPUontf","HqReduIJPoQGDlxKN1FclM7hneh","T6A7dCuexo04Djx3Tq2c2yIrnsc","HL96d660zoHaZ8xzOyYcMvurnMc","F8v7ds0tfos8t8xEBbEcyw2ynnc","D82cdReGToT4iWxJ5eRchOMTnDh","Y2J4dx1CfoATYWx6ldycZAKLn4f","SN9tdJqlcoG9IxxExxhcBGftnsc","KtVidcfcuoTuqkxd7xlcyEqunXb","IFeFdoLbjohSOAx0zZ2cZMRdn1a","PJejdE0cIou3fkx1FUwcdz2lnVc","Tljmd1v1SoS5kkxUGabcR0eznNg","NX5rdGVHwoCaCDxxTn6chpEonVw","AoeAdRpE6oAhnOxlM8NcCtGtn38","ZojAdllQroN7wixAfuncenainNh","VejRd9vX5oMyyrxycULcBy34nvb","PpPWdMrjWoccgzx3IBJcWJvanGj","Wg0qdLPrUoa5O7xXWmbc4YM5nkO","PvAwdwzCXorF6Kxm5VlcpdaJnwb","Gkndd2AqLoHeNbxMjyNcgUQgnsc","AigydmfMXo9rwrxtoAZcQoLRnrc","MMlVdFp6MoxImcx2Mlzchs7Knfg","GiuUdIwx5ocNnpxRsVLc07Qvndf","TFWQdT0EjoWJbaxYikCcFDk1n2b","MMRcdEvVAoj7R5x6cDTcDCdNnMc","ERQZd8yjDoCLAJxRGOwczcLunqb","FasvdKUt0of9YSxzD0nc7r4mnU9","JXjHdVdmOoKaEsx6BlRchg5mnKc","VGHGdgwejo6eG6xiSuscmlSEnlc","PZJydtB8MoCruwxDh4zcLOlJnng","BLzrda8yXoJ26TxRCZycYPh7n6c","D4n1dgzsDo4d51xmxhKckuOHnqd","ROA0dLp6uoGgZcxgxjbc9Tw7nkf","WfeydJvHso40zuxbT06cYGojnve","XKrdd03fboU9OUxbNSkckdR8npb","BcNidXlxvoOlJ0xs2bGclJkonLf","LTZRd3ePOo2aZfxeqDrcXJXEnqg","PQJzdfzYSox9wYxIvcpc0uwenPd","KlPvdTB8Nog3lNxvUTAc9Tr0nyf","QfZzddU7fojw0vxZUUEcSiacnwC","KWfadyw2FoSppYxbDEucKchpnHh","Jv3ndOBFHoY5NMxPQrncHOn5n8c","QlB1duMJloiwxAxhO7WceOdOnYW","AqAHdVOhroOgFDx3MxqcK4rPnVg","M5ZWdb4r1oDLtgxRHmEcaJEanQd","A7hddQTIfoyZIMx65qWc5UwrnHZ","RkL1doBK4ojNGMxBdICc3oPyn8d","NUDadm0QeoBXg9xO2WPcqczmncd","QkAOdz0YxoSa2fxtPyecnywInJg","RC28dxxT7oaDUvxCYBMctJegnBf","IldJdWqQLotdwexVyK3c3Aq0nSd","M0PidrQUho4NsqxtnLUcFv3unCg","GtdOdtpy1oPJszxp0QCcyjLFnif","Oe4RdQSHmoWViXx19SFcwl5VnCB","PqfSdUru3o8ZSyxtLeGc5uyznmd","WZbpdF2TRoTgmzxI3RacMsDsncs","B58YdiJ75oI6bVxMncoctvSAnWg","J7pSdXGOWohKu2xC3F2cUd66nih","WcV9dFS6zoYALKxu19Mcwmz3n1V","S2RXdUlXYo2furxGASycKTWWnoc","MiJadNmLCoeWOMxZroTciDqcncc","Hm2gdOb7MoRrt8xO2W7c8PFenOc","QDaGdIEUYorrkrxb6gtcsfQQnmd","EiiHd029Do4iSaxeE13cNAByn8d","Kum9d3P68oLyWHxmJERcHfuxnIH","WhFmdQzq8oUcv9x7FY3cyjyUnvb","T7YjdsgmdojC3qxq7YkceDoInZb","Glw0d5TffoKQ8mxuVBjcC8WYn3b","BOKndV94po9I6txYwtKcb9Y5nxf","TXKad6iU2o8faTxec6CcUG9MnLg","LdVHdzKdjooaG6xMYLpc6Yt3nPg","GFlWd8JJqoQADYxOIACcXOm0nLe","So9wdQ8tQok0QMxJ0K2cvEeknNb","X3y4d0mZkodzmNxCO9hcldzZn8c","Sr3DdMvigo845Wxh4CocguYUnfH","AaJ8d8Qoxoq8NixEVubcAlimn6f","HgmxdM14MouQMQxAPK0c55lwnrg","Xs0FdSFq1oMzqJxTQ4EcEinhnUb","DasVd8eqFomEnhx8MjtcVC8xnwf","Xq5QdhA3ZobNMYxwnplctetin7f","Km5AdmTdSolD0NxbA7ycwyzEn9P","AoU5dGOSMoIr2qxaWJ7cPOl7nbh","AoprdFSIFoMXYIxVd1CcD7gBnXX","ALCNdsQXOojgcLxgpUVcegGTnzc","Ir4qdZDlNoryC2xaEbCc6xdrnEg","ZokydQgg5o9udnxFiB5cl19tnBf","XphJdjpoCowbwqx0zI8c8SCmnjb","B0ILdzSdEoY1UWxdMa9cz2arnRd","KDgFd4vQKolSJAxc5ZxcAC99nFc","OPVYdM0WJoTaWVxWQKMcKgofnug","Tavwdz4cpou7M3xgu5Xcff08nxc","VQendSOYfocdkhxSDiLcD2zznmc","Tcgxdb7AsofhTUxInhMcYfxenIb","AleKdcgeKocEtmxyx97cfMd6n8g","BJb3dq0poodtvGxDTeqcN23jnmc","Dii1dG7j4oVsgLx8RjtcLpecntb","VBaNduEjjowtByxTZlpc0ErInBf","G9ZcdYDXZoVZd3xjdAKche5Lnyg","K5e8d9pTNoFkBDxNwREcXPgXnGh","XBGzdAYmGoydwzxl1Lecu9gUnph","Y01ld9nnzoFBMwxCL5MclMs2nRg","HpRQdG8yGogWjlxW3MNc0fDLnnB","RVyRduklCoy9xExCqsmc77AGnos","WtDJdP178oNTMBxlRtIcXOudnXh","HNL6dUFJoo3UzgxjndMcIqBXnMd","Mtz0dCkntoCgmOx08L5cisssnLu","DLkGdfuQvomK7Sxkm7jcbW11nTe","Vl0Hd67rDoKU6Zx13S1crMgUn0g","TGbKdXLEcotxLSxjkY7cqTl8nYe","Xx34dPNcVosG0SxVe4XcV3dMnod","UpahdYGN4oaPPHxlShmcQPyOn4g","I5qadKLfmosaKqxRZmzcVcsQnaf","O8BGdjIShobLaqxkuqvcLoDdn5b","FJBddakOgoABDVxsDgAcGsoVnPh","C8ttdcjTnoF4nvxNt0ucq7OIntb","RPd9dnfPcojgPox2oKfcqWd1nNh","E6EPdhEDio5SokxlmmLcSxx9nOh","S1hid8xoco4NjIxEsHGcklybngc","WJRad9YS1oDbj6xKB1AcV7Wwnhe","JU0ZdBEOto2E88xYL1cchppynEh","KWCAd9VZxo9NTUxjrwLcovOKnue","P2ASdwMRGowu98xS0ANcycmSnSf","S8rxdknEWoKvd3xww95cpGLNnyc","Ni4hdGsKaopFfaxpiyJcTw46nVb","PkhFdcAKAogx4cxZAp6cgh52nfg","AtBudwIbioyi6BxPWo0cYGexn6i","PKkndey6noFa6zxP2BVcsX5MnWb","Ej8KdOYS1o6QL4xYFJccCM7snB6","Ml1Wdur6iovA0mxx4R2cPxa1nVb","ByZBdxzusoDDioxwXuScAKvOnhN","YjOFdOd4No36CwxfRO1cbbmRnRh","FQXpde97Vo5xc1xXtE2cxNugn9f","U5FQd0FUkokcmSxjnolcgqMAnsb","X0cedPFvAoyawFxmtbvc87wQnfg","VJGRdYJprodTOtxD17Bcyarlnqc","IOvJdHWOkogtAVxorzpc46NanHb","SWR2dZJhAo1GV0xzaY7cSQUknXc","YYYwdxm8MoUatAxQg8QcVfdcnph","Lr6pd7nbfoNsWzxSVlncOujxnDg","CrFEdsM20oCFaGxry3Rcd6UGn5e","RyD6dy4CAoCYE9xl6QEc2f77ng0","KMj5dnXHMoEB0axPIOQchjhonPe","Mil0dsGVoouJGyx1N7ecrljznZd","KF7mdmR1Mo3zuVx4IxgcgsuPnzh","DHgyds9HNoqUL5xfxKRcmMyBnwe","PgjFdtSwLos3Cix02ypcYAPcnEe","O3ojdk5I8o5mW3xmXTxcvAbCnld","L5yxdc8fXowLQqxWuMzc1SyinEe","VsqOdtkCpoxdfexjHTecDFajnje","ZLZldxws3oYBBlxtYZiccVWlnjc","IbIbdbjM2ooQUkxRU07cq0RDnwh","Qf2ddhVHBo7oKdxe2klcSB93nfd","ExDnd1RFioYMfdxK0KFcTtnGnsd","EFGjdYLmCoA4utxoqfFcZB6Jnae","J83odHv0wohBS5xahelcWVgynve","X01EdC6fcorb62xf40tcOAainbg","D3VOdDOuioiJCQxaQGfcjTTcn8e","Nf7Ddbbz6ooXcaxjgAecnuQ8nug","JeyddX7cAoTb9LxCebJc18ZXnSc","FS6wdBBsMorxgWxrOQhc8d7Ensb","OUY3d8IuWogAMXxTEVSc4PaLnIC","JJtZdHProoTplpxhufnc4RHJn8g","AHchdkJlzoM9oYxYuzGcXp0TnIh","QtdndoxiVo4mDHxtEUuc89yvnDb","DSead4GGMooqpIxu05acu908nIh","JqnYd98fTogMIqxXVuFcQF3tnFe","K5AJdlZkmol3CFxGjpvcNdeHn9g","A2h0dHx9BoMNcJxlwSFcvDX6npc","LE4tdfl0AoqARBxFDqicQv83nMd","LlQQdEy5AoPHKdxI6iGcjxMVnoe","Y0c4d6uL2o6F28xv2OQcxtiSnff","HRSdd2MVgoeCzqxfRU6c8nkVnIb","NlLEdWiEyovFVNxUvLCcXAdDnJc","IQIfdHZUboDO3Ix8UHRc4C5jnPg","JiKMdcPGAoK3hfxtsoZcXQMnnXc","XZ4Ldpzg9oOtvIxyzTWcyO6HnDe","UOJbdZA2DoIrZrxd6YycA6AsnJf","Age0dIzFZovPxgxVU3Tc2MpVnlc","QZD9dD8Jkov71Dxd4NucMRconWg","DRg0dnUrhoA8UQxAPYlcVBTvnTb","OmOedS2HwoK2KsxWNt7c3CVSn6c","XYFcd6cSTofSrvxqQJrcnm6Qn0f","FcS1dmID6oaPbqxyJYUcHJzDnLA","TzL6dQnESopzUyxYZFBcCbEGnqc","OIR9dMaJgoQmGkxG2gGcDwajnkc","EdModLXwWoy4bxxqS0Jcu00HnEe","CP3jd5yDsojQowx8alCckMGpnEg","Ux3rdLHtnokfqExC8i3cRhUxnLf","ClaFdXQ7FoiolGx6OZKcACV9n7d","RKkHdrMEjo9NPax4F1LcLsEtnxf","NN6kdGpa4oZJSkxZWVBcoSG4nIc","JbDwdVGM9ofPpwxUSDNcxZQpnbg","Z3qldCl2ho7xCwxIhi7cTTJWnFc","UoeGd35MNoOWaaxbhItc4Ud6ncg","N3BFdjgpboXdGFx2NBXcE9yOnag","ZXBMdELcyoLJ5exhZ4Hcme9Vn8d","BFMCd7putoBBPGxje7vcHuVTnnc","X2LNdjZFEoVflSx1cCaciOgOnBY","BbppdLfCvouz9vxeXlzcBn4LnjW","IqaedGdzpoFTkYxyVxCcAxexnig","MjiZdGH1roY0QTxhaqLcmYmJn7c","Nq2bdYAs7omxpjxMdBccKDX5nEb","YBZWd8H2doRnzqxdX27c9rBinWb","WWz7dcxzUoQZLGxGQJgcDyLTnlh","XMHldnqAkojhTnx85zvcyTw7nve","M27hdVOCGoLZAvxP9gKcaMiKnwg","P3uEdKIgxowkscx4E5gcnmY3nOf","VzBkdxEOroFJONxM0WNcwY5wnaf","Rg0VdGBXdoll1hxRVdeccPDdnJh","CWFcdQTsEoupkNxYzI5c9TLan6f","HyZydOuTJoa2yJxDmNTc8cDXnIf","MXKhdjx6ootOQixu0z5cFquYnxd","G45xdpWXXoX3foxxfD0clZm0nqf","Y5kKd6Rq4oeoxLxWz5fcElgwndO","LT5sdfVhhoDe1PxuRWacmSzsnbg"],"page":{"elements":[{"text_run":{"content":"用户模块","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1}},"parent_id":""},{"block_id":"GstjdxwOHowlPwxyFxYcWStBneh","block_type":3,"heading1":{"elements":[{"text_run":{"content":"需求分析","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"L0HydWgU9oKXd8xi5ECc4GUknEg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"对于用户模块，通常要具有下列功能：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"UpDCdnlGPoNbZQxmH8wcVfNfnih","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户注册","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OD5ndM4wcouclHxYbwtcEL1EnEb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户登录","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"IJcbd7POxoKY1nxP1JXcpl6anzb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"获取当前登录用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"RSD7dtf16otmQJxkH5UcZD5Xn1c","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户注销","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ELIfdJ1X2oYvKSxpfSTcOOA8nde","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户权限控制","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"D6KPdJCPOoT6lnxwF2JcQ7jBnzE","block_type":12,"bullet":{"elements":[{"text_run":{"content":"【管理员】管理用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"O12odw1GUotApOxq4yAcuJSvn5h","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"HduVdJ3Zjocjbfx6UoRcVmN9n6b","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"具体分析每个需求：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Lpz5dHXKvohyRJxTR6Bcc2ptnSb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"1）用户注册：用户可以通过输入账号、密码、确认密码进行注册","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"IuOMdFrUXo6ml9xD6LIc7ZuQnAc","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"2）用户登录：用户可以通过输入账号和密码登录","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"GK0Vd5m3soOqQ9xXchncpSZrnOb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"3）获取当前的登录用户：得到当前已经登录的用户信息（不用重复登录）","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"H71idHTpMoyiOBxE1PCcz4iDnLb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"4）用户注销：用户可以退出登录","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"VNvgdP3yAodqSMxW41Qc3KhVnFg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"5）用户权限控制：用户又分为普通用户和管理员，管理员拥有整个系统的最高权限，比如可以管理其他用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Kz3tdB2ZgoHfydxGxA3cO0rZnkF","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"6）用户管理：仅管理员可用，可以对整个系统中的用户进行管理，比如搜索用户、删除用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"UXvVd2pIYonTkNxQIzBcvtEancf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"PSuFdMPBqorr4TxOG8ncJCrhnug","block_type":3,"heading1":{"elements":[{"text_run":{"content":"方案设计","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WefmdP2YSovyAnxX2QhcdwMbneb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"实现用户模块的难度不大，方案设计阶段我们需要确认：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"TMAFdiygxoKaVvxyQNgcJPAqnng","block_type":12,"bullet":{"elements":[{"text_run":{"content":"库表设计","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KeYNdRveYo32Emxkn7vcZuHKnid","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户登录流程","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ZQrjdsZXMoBfJhx4JcVc22YynNe","block_type":12,"bullet":{"elements":[{"text_run":{"content":"如何对用户权限进行控制？","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"RCeFdSnMuo9epVxuti4cfgF4nPg","block_type":4,"heading2":{"elements":[{"text_run":{"content":"库表设计","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"P6WNdBWFcotjbHxiFA5cNZQ9nSb","block_type":5,"heading3":{"elements":[{"text_run":{"content":"核心设计","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QhyKdnqacosFPFxKJ97c8o0tnDh","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"库名：yu_picture","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"XMjJdz3wWoXbR7xrqhCcAilJnLX","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"表名：user（用户表）","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Xilbdn0vRoa8bhx95rMcCfUFncg","block_type":14,"code":{"elements":[{"text_run":{"content":"-- 用户表\ncreate table if not exists user\n(\n    id          bigint auto_increment comment 'id' primary key,\n    userAccount varchar(256)         not null comment '账号',\n    userPassword varchar(512)         not null comment '密码',\n    userName    varchar(256)         null comment '用户昵称',\n    userAvatar  varchar(1824)        null comment '用户头像',\n    userProfile varchar(512)         null comment '用户简介',\n    userRole    varchar(256) default 'user' not null comment '用户角色：user/admin',\n    editTime    datetime             default CURRENT_TIMESTAMP not null comment '编辑时间',\n    createTime  datetime             default CURRENT_TIMESTAMP not null comment '创建时间',\n    updateTime  datetime             default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment '更新时间',\n    isDelete    tinyint 0            default 0 not null comment '是否删除',\n    UNIQUE KEY idx_userAccount (userAccount),\n    INDEX idx_userName (userName)\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":") comment '用户表' collate = utf8mb4_unicode_ci;","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":56,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OyCBdYeOeoVDD7x3w17c4CEBncb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"几个注意事项：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"JrfOdrVCXo0WNIxlh6wcWFYInyd","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"1）editTime 和 updateTime 的区别：editTime 表示用户编辑个人信息的时间（需要业务代码来更新），而 updateTime 表示这条记录任何字段发生修改的时间（由数据库自动更新）。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"EIggdD2H3oq9IpxnjjMc2obwnLh","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"2）给唯一值添加唯一键（唯一索引），比如账号 userAccount，利用数据库天然防重复，同时可以增加查询效率。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"JX3qdvERFoAcgvxJcFUcpC2EnNc","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"3）给经常用于查询的字段添加索引，比如用户昵称 userName，可以增加查询效率。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"V6fldpcvIoSa1xxODQgc0JgknZg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"👇 建议养成好习惯，将库表设计 SQL 保存到项目的目录中，比如新建 sql/create_table.sql 文件，这样其他开发者就能更快地了解项目。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"CIQxdMX7hoWrrTxZBaQcM1bKnth","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"TJT8d5whaoJIdQxx3uucDJVhnYf","block_type":5,"heading3":{"elements":[{"text_run":{"content":"扩展设计","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Aty8dFep8oOhvlxf1QGcbSXtnOf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"1）如果要实现会员功能，可以对表进行如下扩展：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Lsm8dMqK0okVP5xgK4xcX9ORnMO","block_type":13,"ordered":{"elements":[{"text_run":{"content":"给 userRole 字段新增枚举值 vip，表示会员用户，可根据该值判断用户权限","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QLdsd0BQeoPxixxd5yMcqQTDn2c","block_type":13,"ordered":{"elements":[{"text_run":{"content":"新增会员过期时间字段，可用于记录会员有效期","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"2"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"TehHdbVztoxYbDxBAmccVGw7nSh","block_type":13,"ordered":{"elements":[{"text_run":{"content":"新增会员兑换码字段，可用于记录会员的开通方式","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"3"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QwERduzPho37CbxJKXecnB2FnJf","block_type":13,"ordered":{"elements":[{"text_run":{"content":"新增会员编号字段，可用于定位用户并提供额外服务，并增加会员归属感","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"4"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"YYqidDwAro4xvnxQSOvcaoULnfm","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"对应的 SQL 如下：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"CnbNdEIAsoV0zGxdzUOcb1qBnEd","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Yf6ndkBbJoVAuOxBpF3cOfurnxe","block_type":14,"code":{"elements":[{"text_run":{"content":"vipExpireTime datetime         null comment '会员过期时间',\nvipCode       varchar(128)     null comment '会员兑换码',\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"vipNumber      bigint           null comment '会员编号'","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":56,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KQIPd30Xqo13iwxVjWecjGxRnPg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"YkRPdq3SAouh2exhDwAcsaqjn4f","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"2）如果要实现用户邀请功能，可以对表进行如下扩展：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"D1j8dEgIropq8HxTqkWcBnq3nde","block_type":13,"ordered":{"elements":[{"text_run":{"content":"新增 shareCode 分享码字段，用于记录每个用户的唯一邀请标识，可拼接到邀请网址后面，比如 https://mianshiyuan/shareCode=xxx","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"SyfbdWHXpoXxDxxrguDcm961nWh","block_type":13,"ordered":{"elements":[{"text_run":{"content":"新增 inviteUser 字段，用于记录该用户被哪个用户邀请了，可通过这个字段查询某用户邀请的用户列表。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"2"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"TEZ0dZaq6oLe54xd8iBc70XSnze","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"对应的 SQL 如下：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"WaLCdYr6Loee2wx5YZLcF2o6nzW","block_type":14,"code":{"elements":[{"text_run":{"content":"shareCode     varchar(28) DEFAULT NULL COMMENT '分享码',\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"inviteUser     bigint          DEFAULT NULL COMMENT '邀请用户 id'","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":56,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"CeRfdI4qQo82IsxJiFLcg05KnoG","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"WyOSdt6KRomNs6xBWARcAFwrnVb","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户登录流程","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JswxdQNiOoeQ7NxfyNHcc83vn7e","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"1）建立初始会话：前端与服务器建立连接后，服务器会为该客户端创建一个初始的匿名 Session，并将其状态保存下来。这个 Session 的 ID 会作为唯一标识，返回给前端。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"PJVTdY5mJoJk7Tx0c9bcnJPTnZd","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"2）登录成功，更新会话信息：当用户在前端输入正确的账号密码并提交到后端验证成功后，后端会更新该用户的 Session，将用户的登录信息（如用户 ID、用户名等）保存到与该 Session 关联的存储中。同时，服务器会生成一个 Set-Cookie 的响应头，指示前端保存该用户的 Session ID。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"OuKTdt4nWo1XGCxmCVMc6wV6n4b","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"3）前端保存 Cookie：前端接收到后端的响应后，浏览器会自动根据 Set-Cookie 指令，将 Session ID 存储到浏览器的 Cookie 中，与该域名绑定。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"YpTHdqlnaoqUKpxndQocFwOGnmg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"4）带 Cookie 的后续请求：当前端再次向相同域名的服务器发送请求时，浏览器会自动在请求头中附带之前保存的 Cookie，其中包含 Session ID。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"HViMdnATUoeDfJxN33rc2yktnpb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"5）后端验证会话：服务器接收到请求后，从请求头中提取 Session ID，找到对应的 Session 数据。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Mn8Udr0b7o2efSxZ0bqceQq4noc","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"6）获取会话中存储的信息：后端通过该 Session 获取之前存储的用户信息（如登录名、权限等），从而识别用户身份并执行相应的业务逻辑。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"WYE2dcWeUof9C4xBiiccTKdPnXd","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"AL6GdlW5ioFDVsxoonVcOXMTnQd","block_type":4,"heading2":{"elements":[{"text_run":{"content":"如何对用户权限进行控制？","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Td8gdxJKco1IhyxQxVRcSkd6nPf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"可以将接口分为 4 种权限：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Lf18dXdFuofNQHxKa3ecLLS7nZf","block_type":13,"ordered":{"elements":[{"text_run":{"content":"未登录也可以使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"E5lcduSiLoEvxzxpJlZc1lH6n9d","block_type":13,"ordered":{"elements":[{"text_run":{"content":"登录用户才能使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"2"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Kmx2dNxReoF01sxCWjdcwQU2nXe","block_type":13,"ordered":{"elements":[{"text_run":{"content":"未登录也可以使用，但是登录用户能进行更多操作（比如登录后查看全文）","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"3"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"UEbKdV0M8o0hvbxoB3gclyIlnvf","block_type":13,"ordered":{"elements":[{"text_run":{"content":"仅管理员才能使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"4"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"J5D3dPAJloK9Ovx8ggfcf92fnMe","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"传统的权限控制方法是，在每个接口内单独编写逻辑：先获取到当前登录用户信息，然后判断用户的权限是否符合要求。这种方法最灵活，但是会写很多重复的代码，而且其他开发者无法一眼得知接口所需要的权限。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"GUBqdBaXnoHdBixmWw9c5AO0nCb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"权限校验其实是一个比较通用的业务需求，一般会通过 **Spring AOP 切面 + 自定义权限校验注解 **实现统一的接口拦截和权限校验；如果有特殊的权限校验逻辑，再单独在接口中编码。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"GihEdahFUoznoMxjZF1ccvisnlf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"👇 如果需要更复杂更灵活的权限控制，可以引入 Shiro / Spring Security / Sa-Token 等专门的权限管理框架","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"EhxfdAz78oZZ0GxxDkYcitVMnud","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"返回处理结果（如页面或数据）","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"SVPDduIDZoYfatxXsCIcia0Pncd","block_type":22,"divider":{},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Gt8VdyOffoTUxFx0Do8c3lpNnNg","block_type":3,"heading1":{"elements":[{"text_run":{"content":"后端开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"TsujdEsXToXxFBxhgLLcDbSqnLf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"整个项目采用mvc模式，这里我在controller层和model层之间加一层service","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"GLf6d0mn7ohRClxvw6ScRhWdnXf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"BggldTr9CoD0rRxYAHncSmnmnzb","block_type":27,"image":{"align":2,"height":636,"token":"DTbfb7LbwoI7U9xNDBQc67hMnfd","width":680},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JWEcd5CkNoCDopx3HZocVZhJnOb","block_type":4,"heading2":{"elements":[{"text_run":{"content":"数据模型开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"URLNdiawbo44vzxaqqFc8rFgnkd","block_type":5,"heading3":{"elements":[{"text_run":{"content":"实体类","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ZpysdLEGmozAqIxYi3ycAPUontf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"生成的代码也许不能完全满足我们的要求，比如数据库实体类，我们可以手动更改其字段配置，指定主键策略和逻辑删除。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"HqReduIJPoQGDlxKN1FclM7hneh","block_type":13,"ordered":{"elements":[{"text_run":{"content":"id默认是连续生成的，容易被爬虫抓取，所以更换策略为ASSIGN_ID雪花算法生成。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"T6A7dCuexo04Djx3Tq2c2yIrnsc","block_type":13,"ordered":{"elements":[{"text_run":{"content":"数据删除时默认为彻底删除记录，如果出现误删，将难以恢复，所以采用逻辑删除——通过修改isDelete字段为1表示已失效的数据。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"auto"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"HL96d660zoHaZ8xzOyYcMvurnMc","block_type":14,"code":{"elements":[{"text_run":{"content":"@TableName(value =\"user\")\n@Data\npublic class User implements Serializable {\n    /**\n     * id（要指定主键策略）\n     */\n    @TableId(type = IdType.ASSIGN_ID)\n    private Long id;\n\n    // ...\n    \n    /**\n     * 是否删除（逻辑删除）\n     */\n    @TableLogic\n    private Integer isDelete;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"F8v7ds0tfos8t8xEBbEcyw2ynnc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"枚举类","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"D82cdReGToT4iWxJ5eRchOMTnDh","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"对于用户角色这样值的数量有限的、可枚举的字段，最好定义一个枚举类，便于在项目中获取值、减少枚举值输入错误的","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Y2J4dx1CfoATYWx6ldycZAKLn4f","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"情况。在model.enums包下新建UserRoleEnum:","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"SN9tdJqlcoG9IxxExxhcBGftnsc","block_type":14,"code":{"elements":[{"text_run":{"content":"@Getter\npublic enum UserRoleEnum {\n\n    USER(\"用户\", \"user\"),\n    ADMIN(\"管理员\", \"admin\");\n\n    private final String text;\n\n    private final String value;\n\n    UserRoleEnum(String text, String value) {\n        this.text = text;\n        this.value = value;\n    }\n\n    /**\n     * 根据 value 获取枚举\n     *\n     * @param value 枚举值的value\n     * @return 枚举值\n     */\n    public static UserRoleEnum getEnumByValue(String value) {\n        if (ObjUtil.isEmpty(value)) {\n            return null;\n        }\n        for (UserRoleEnum anEnum : UserRoleEnum.values()) {\n            if (anEnum.value.equals(value)) {\n                return anEnum;\n            }\n        }\n        return null;\n    }\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":63,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KtVidcfcuoTuqkxd7xlcyEqunXb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"其中，getEnumByValue 是通过 value 找到具体的枚举对象。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"IFeFdoLbjohSOAx0zZ2cZMRdn1a","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"如果枚举值特别多，可以Map缓存所有枚举值来加速查找，而不是遍历列表。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"PJejdE0cIou3fkx1FUwcdz2lnVc","block_type":22,"divider":{},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Tljmd1v1SoS5kkxUGabcR0eznNg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"下面依次进行各功能接口的开发。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"NX5rdGVHwoCaCDxxTn6chpEonVw","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"AoeAdRpE6oAhnOxlM8NcCtGtn38","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户注册","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ZojAdllQroN7wixAfuncenainNh","block_type":5,"heading3":{"elements":[{"text_run":{"content":"数据模型","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"VejRd9vX5oMyyrxycULcBy34nvb","block_type":14,"code":{"elements":[{"text_run":{"content":"@Data\npublic class UserRegisterRequest implements Serializable {\n\n    private static final long serialVersionUID = 3191241716373120793L;\n\n    /**\n     * 账号\n     */\n    private String userAccount;\n\n    /**\n     * 密码\n     */\n    private String userPassword;\n\n    /**\n     * 确认密码\n     */\n    private String checkPassword;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":9,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"PpPWdMrjWoccgzx3IBJcWJvanGj","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在Java接口开发中，为每个接口定义一个专门的类来接收请求参数，可以提高代码的可读性和维护性，便于对参进行统一验证和扩展，同时减少接口方法参数过多导致的复杂性，有助于在复杂场景下更清晰地管理和传递数据。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Wg0qdLPrUoa5O7xXWmbc4YM5nkO","block_type":5,"heading3":{"elements":[{"text_run":{"content":"服务开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"PvAwdwzCXorF6Kxm5VlcpdaJnwb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在service包的 UserService 中增加方法声明：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Gkndd2AqLoHeNbxMjyNcgUQgnsc","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * 用户注册\n *\n * @param userAccount   用户账户\n * @param userPassword  用户密码\n * @param checkPassword 校验密码\n * @return 新用户 id\n */\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"long userRegister(String userAccount, String userPassword, String checkPassword);","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":30,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AigydmfMXo9rwrxtoAZcQoLRnrc","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在UserServicelmpl中增加实现代码，注意多补充一些校验条件：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"MMlVdFp6MoxImcx2Mlzchs7Knfg","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic long userRegister(String userAccount, String userPassword, String checkPassword) {\n    // 1. 校验\n    if (StrUtil.hasBlank(userAccount, userPassword, checkPassword)) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"参数为空\");\n    }\n    if (userAccount.length() < 4) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"用户账号过短\");\n    }\n    if (userPassword.length() < 8 || checkPassword.length() < 8) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"用户密码过短\");\n    }\n    if (!userPassword.equals(checkPassword)) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"两次输入的密码不一致\");\n    }\n    // 2. 检查是否重复\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq(\"userAccount\", userAccount);\n    long count = this.baseMapper.selectCount(queryWrapper);\n    if (count > 0) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"账号重复\");\n    }\n    // 3. 加密\n    String encryptPassword = getEncryptPassword(userPassword);\n    // 4. 插入数据\n    User user = new User();\n    user.setUserAccount(userAccount);\n    user.setUserPassword(encryptPassword);\n    user.setUserName(\"无名\");\n    user.setUserRole(UserRoleEnum.USER.getValue());\n    boolean saveResult = this.save(user);\n    if (!saveResult) {\n        throw new BusinessException(ErrorCode.SYSTEM_ERROR, \"注册失败，数据库错误\");\n    }\n    return user.getId();\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"GiuUdIwx5ocNnpxRsVLc07Qvndf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"注意，上述代码中，我们需要将用户密码加密后进行存储。可以封装一个方法，便于后续复用：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"TFWQdT0EjoWJbaxYikCcFDk1n2b","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic String getEncryptPassword(String userPassword) {\n    // 盐值，混淆密码\n    final String SALT = \"chengfu\";\n    return DigestUtils.md5DigestAsHex((SALT + userPassword).getBytes());\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":63,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"MMRcdEvVAoj7R5x6cDTcDCdNnMc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"接口开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ERQZd8yjDoCLAJxRGOwczcLunqb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在controller包中新建UserController，新增用户注册接口：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"FasvdKUt0of9YSxzD0nc7r4mnU9","block_type":14,"code":{"elements":[{"text_run":{"content":"@RestController\n@RequestMapping(\"/user\")\npublic class UserController {\n\n    @Resource\n    private UserService userService;\n\n    /**\n     * 用户注册\n     */\n    @PostMapping(\"/register\")\n    public BaseResponse<Long> userRegister(@RequestBody UserRegisterRequest userRegisterRequest) {\n        ThrowUtils.throwIf(userRegisterRequest == null, ErrorCode.PARAMS_ERROR);\n        String userAccount = userRegisterRequest.getUserAccount();\n        String userPassword = userRegisterRequest.getUserPassword();\n        String checkPassword = userRegisterRequest.getCheckPassword();\n        long result = userService.userRegister(userAccount, userPassword, checkPassword);\n        return ResultUtils.success(result);\n    }\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JXjHdVdmOoKaEsx6BlRchg5mnKc","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户登录","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"VGHGdgwejo6eG6xiSuscmlSEnlc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"数据模型","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"PZJydtB8MoCruwxDh4zcLOlJnng","block_type":14,"code":{"elements":[{"text_run":{"content":"@Data\npublic class UserLoginRequest implements Serializable {\n\n    private static final long serialVersionUID = 3191241716373120793L;\n\n    /**\n     * 账号\n     */\n    private String userAccount;\n\n    /**\n     * 密码\n     */\n    private String userPassword;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"BLzrda8yXoJ26TxRCZycYPh7n6c","block_type":5,"heading3":{"elements":[{"text_run":{"content":"服务开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"D4n1dgzsDo4d51xmxhKckuOHnqd","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * 用户登录\n *\n * @param userAccount  用户账户\n * @param userPassword 用户密码\n * @param request\n * @return 脱敏后的用户信息\n */\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"LoginUserVO userLogin(String userAccount, String userPassword, HttpServletRequest request);","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ROA0dLp6uoGgZcxgxjbc9Tw7nkf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在UserServicelmpl中增加实现代码，注意多补充一些校验条件，在用户登录成功后，将用户信息存储在当前的Session中。代码如下：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"WfeydJvHso40zuxbT06cYGojnve","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic LoginUserVO userLogin(String userAccount, String userPassword, HttpServletRequest request) {\n    // 1. 校验\n    if (StrUtil.hasBlank(userAccount, userPassword)) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"参数为空\");\n    }\n    if (userAccount.length() < 4) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"账号错误\");\n    }\n    if (userPassword.length() < 8) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"密码错误\");\n    }\n    // 2. 加密\n    String encryptPassword = getEncryptPassword(userPassword);\n    // 查询用户是否存在\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq(\"userAccount\", userAccount);\n    queryWrapper.eq(\"userPassword\", encryptPassword);\n    User user = this.baseMapper.selectOne(queryWrapper);\n    // 用户不存在\n    if (user == null) {\n        log.info(\"user login failed, userAccount cannot match userPassword\");\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"用户不存在或密码错误\");\n    }\n    // 3. 记录用户的登录态\n    request.getSession().setAttribute(USER_LOGIN_STATE, user);\n    return this.getLoginUserVO(user);\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":63,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XKrdd03fboU9OUxbNSkckdR8npb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"注意，由于注册用户时存入数据库的密码是加密后的，查询用户信息时，也要对用户输入的密码进行同样算法的加密，才能跟数据库的信息对应上。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"BcNidXlxvoOlJ0xs2bGclJkonLf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"可以把上述的 Session理解为一个Map，可以给 Map设置 key 和 value，每个不同的 SessionID 对应的 Session存储都是不同的，不用担心会污染。所以上述代码中，给Session设置了固定的key(USER_LOGIN_STATE)，可以将这个key值提取为常量，便于后续获取。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"LTZRd3ePOo2aZfxeqDrcXJXEnqg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在constant包下新建UserConstant 类，统一声明用户相关的常量：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"PQJzdfzYSox9wYxIvcpc0uwenPd","block_type":14,"code":{"elements":[{"text_run":{"content":"public interface UserConstant {\n\n    /**\n     * 用户登录态键\n     */\n    String USER_LOGIN_STATE = \"user_login\";\n\n    //  region 权限\n\n    /**\n     * 默认角色\n     */\n    String DEFAULT_ROLE = \"user\";\n\n    /**\n     * 管理员角色\n     */\n    String ADMIN_ROLE = \"admin\";\n    \n    // endregion\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KlPvdTB8Nog3lNxvUTAc9Tr0nyf","block_type":5,"heading3":{"elements":[{"text_run":{"content":"接口开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QfZzddU7fojw0vxZUUEcSiacnwC","block_type":14,"code":{"elements":[{"text_run":{"content":"@PostMapping(\"/login\")\npublic BaseResponse<LoginUserVO> userLogin(@RequestBody UserLoginRequest userLoginRequest, HttpServletRequest request) {\n    ThrowUtils.throwIf(userLoginRequest == null, ErrorCode.PARAMS_ERROR);\n    String userAccount = userLoginRequest.getUserAccount();\n    String userPassword = userLoginRequest.getUserPassword();\n    LoginUserVO loginUserVO = userService.userLogin(userAccount, userPassword, request);\n    return ResultUtils.success(loginUserVO);\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KWfadyw2FoSppYxbDEucKchpnHh","block_type":4,"heading2":{"elements":[{"text_run":{"content":"获取当前用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Jv3ndOBFHoY5NMxPQrncHOn5n8c","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"可以从request请求对象对应的Session中直接获取到之前保存的登录用户信息，无需其他请求参数。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"QlB1duMJloiwxAxhO7WceOdOnYW","block_type":5,"heading3":{"elements":[{"text_run":{"content":"服务开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AqAHdVOhroOgFDx3MxqcK4rPnVg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在service包的 UserService 中增加方法声明：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"M5ZWdb4r1oDLtgxRHmEcaJEanQd","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * 获取当前登录用户\n *\n * @param request\n * @return\n */\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"User getLoginUser(HttpServletRequest request);","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"A7hddQTIfoyZIMx65qWc5UwrnHZ","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在UserServicelmpl中增加实现代码，此处为了保证获取到的数据始终是最新的，先从Session中获取登录用户的id，然后从数据库中查询最新的结果。代码如下：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"RkL1doBK4ojNGMxBdICc3oPyn8d","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic User getLoginUser(HttpServletRequest request) {\n    // 先判断是否已登录\n    Object userObj = request.getSession().getAttribute(USER_LOGIN_STATE);\n    User currentUser = (User) userObj;\n    if (currentUser == null || currentUser.getId() == null) {\n        throw new BusinessException(ErrorCode.NOT_LOGIN_ERROR);\n    }\n    // 从数据库查询（追求性能的话可以注释，直接返回上述结果）\n    long userId = currentUser.getId();\n    currentUser = this.getById(userId);\n    if (currentUser == null) {\n        throw new BusinessException(ErrorCode.NOT_LOGIN_ERROR);\n    }\n    return currentUser;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"NUDadm0QeoBXg9xO2WPcqczmncd","block_type":5,"heading3":{"elements":[{"text_run":{"content":"接口开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QkAOdz0YxoSa2fxtPyecnywInJg","block_type":14,"code":{"elements":[{"text_run":{"content":"@GetMapping(\"/get/login\")\npublic BaseResponse<LoginUserVO> getLoginUser(HttpServletRequest request) {\n    User loginUser = userService.getLoginUser(request);\n    return ResultUtils.success(userService.getLoginUserVO(loginUser));\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"RC28dxxT7oaDUvxCYBMctJegnBf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"注意，上述代码是直接将数据库查到的所有信息都返回给了前端（包括密码），可能存在信息泄露的安全风险。因此，我们还需要对返回结果进行脱敏处理。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"IldJdWqQLotdwexVyK3c3Aq0nSd","block_type":5,"heading3":{"elements":[{"text_run":{"content":"数据脱敏","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"M0PidrQUho4NsqxtnLUcFv3unCg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在model.vo包下新建LoginUserVo类，表示脱敏后的登录用户信息：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"GtdOdtpy1oPJszxp0QCcyjLFnif","block_type":14,"code":{"elements":[{"text_run":{"content":"@Data\npublic class LoginUserVO implements Serializable {\n\n    /**\n     * 用户 id\n     */\n    private Long id;\n\n    /**\n     * 账号\n     */\n    private String userAccount;\n\n    /**\n     * 用户昵称\n     */\n    private String userName;\n\n    /**\n     * 用户头像\n     */\n    private String userAvatar;\n\n    /**\n     * 用户简介\n     */\n    private String userProfile;\n\n    /**\n     * 用户角色：user/admin\n     */\n    private String userRole;\n\n    /**\n     * 创建时间\n     */\n    private Date createTime;\n\n    /**\n     * 更新时间\n     */\n    private Date updateTime;\n\n    private static final long serialVersionUID = 1L;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":9,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Oe4RdQSHmoWViXx19SFcwl5VnCB","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在UserService中新增获取脱敏后的已登录用户信息方法：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"PqfSdUru3o8ZSyxtLeGc5uyznmd","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * 获取脱敏的已登录用户信息\n *\n * @return\n */\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"LoginUserVO getLoginUserVO(User user);","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WZbpdF2TRoTgmzxI3RacMsDsncs","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"编写方法对应的实现类，其实就是将User类的属性复制到LoginUserVO中，不存在的字段就被过滤掉了：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"B58YdiJ75oI6bVxMncoctvSAnWg","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic LoginUserVO getLoginUserVO(User user) {\n    if (user == null) {\n        return null;\n    }\n    LoginUserVO loginUserVO = new LoginUserVO();\n    BeanUtils.copyProperties(user, loginUserVO);\n    return loginUserVO;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":56,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"J7pSdXGOWohKu2xC3F2cUd66nih","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"修改Controller 的 getLoginUser接口，改为返回脱敏后的用户信息：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"WcV9dFS6zoYALKxu19Mcwmz3n1V","block_type":14,"code":{"elements":[{"text_run":{"content":"@GetMapping(\"/get/login\")\npublic BaseResponse<LoginUserVO> getLoginUser(HttpServletRequest request) {\n    User user = userService.getLoginUser(request);\n    return ResultUtils.success(userService.getLoginUserVO(user));\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"S2RXdUlXYo2furxGASycKTWWnoc","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户注销","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"MiJadNmLCoeWOMxZroTciDqcncc","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"可以从request请求对象对应的Session中直接获取到之前保存的登录用户信息，来完成注销，无需其他请求参数。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Hm2gdOb7MoRrt8xO2W7c8PFenOc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"服务开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QDaGdIEUYorrkrxb6gtcsfQQnmd","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在service包的 UserService 中增加方法声明:","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"EiiHd029Do4iSaxeE13cNAByn8d","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * 用户注销\n *\n * @param request\n * @return\n */\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"boolean userLogout(HttpServletRequest request);","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Kum9d3P68oLyWHxmJERcHfuxnIH","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在UserServicelmpl中增加实现代码，从Session中移除掉当前用户的登录态即可：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"WhFmdQzq8oUcv9x7FY3cyjyUnvb","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic boolean userLogout(HttpServletRequest request) {\n    // 先判断是否已登录\n    Object userObj = request.getSession().getAttribute(USER_LOGIN_STATE);\n    if (userObj == null) {\n        throw new BusinessException(ErrorCode.OPERATION_ERROR, \"未登录\");\n    }\n    // 移除登录态\n    request.getSession().removeAttribute(USER_LOGIN_STATE);\n    return true;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":63,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"T7YjdsgmdojC3qxq7YkceDoInZb","block_type":5,"heading3":{"elements":[{"text_run":{"content":"接口开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Glw0d5TffoKQ8mxuVBjcC8WYn3b","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在UserController中新增用户注销接口:","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"BOKndV94po9I6txYwtKcb9Y5nxf","block_type":14,"code":{"elements":[{"text_run":{"content":"@PostMapping(\"/logout\")\npublic BaseResponse<Boolean> userLogout(HttpServletRequest request) {\n    ThrowUtils.throwIf(request == null, ErrorCode.PARAMS_ERROR);\n    boolean result = userService.userLogout(request);\n    return ResultUtils.success(result);\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":63,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"TXKad6iU2o8faTxec6CcUG9MnLg","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户权限控制","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"LdVHdzKdjooaG6xMYLpc6Yt3nPg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"权限校验其实是一个比较通用的业务需求，一般会通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"SpringAOP切面+自定义权限校验注解","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":" 实现统一的接口拦截和权限校验；如果有特殊的权限校验逻辑，再单独在接口中编码。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"GFlWd8JJqoQADYxOIACcXOm0nLe","block_type":5,"heading3":{"elements":[{"text_run":{"content":"权限校验注解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"So9wdQ8tQok0QMxJ0K2cvEeknNb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"首先编写权限校验注解，放到annotation包下:","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"X3y4d0mZkodzmNxCO9hcldzZn8c","block_type":14,"code":{"elements":[{"text_run":{"content":"@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface AuthCheck {\n\n    /**\n     * 必须有某个角色\n     */\n    String mustRole() default \"\";\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Sr3DdMvigo845Wxh4CocguYUnfH","block_type":5,"heading3":{"elements":[{"text_run":{"content":"权限校验切面","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AaJ8d8Qoxoq8NixEVubcAlimn6f","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"编写权限校验AOP，采用环绕通知，在**打上该注解的方法**执行前后进行一些额外的操作，比如校验权限。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"HgmxdM14MouQMQxAPK0c55lwnrg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"代码如下，放到aop包下：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Xs0FdSFq1oMzqJxTQ4EcEinhnUb","block_type":14,"code":{"elements":[{"text_run":{"content":"@Aspect\n@Component\npublic class AuthInterceptor {\n\n    @Resource\n    private UserService userService;\n\n    /**\n     * 执行拦截\n     *\n     * @param joinPoint 切入点\n     * @param authCheck 权限校验注解\n     */\n    @Around(\"@annotation(authCheck)\")\n    public Object doInterceptor(ProceedingJoinPoint joinPoint, AuthCheck authCheck) throws Throwable {\n        String mustRole = authCheck.mustRole();\n        RequestAttributes requestAttributes = RequestContextHolder.currentRequestAttributes();\n        HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();\n        // 当前登录用户\n        User loginUser = userService.getLoginUser(request);\n        UserRoleEnum mustRoleEnum = UserRoleEnum.getEnumByValue(mustRole);\n        // 不需要权限，放行\n        if (mustRoleEnum == null) {\n            return joinPoint.proceed();\n        }\n        // 以下为：必须有该权限才通过\n        // 获取当前用户具有的权限\n        UserRoleEnum userRoleEnum = UserRoleEnum.getEnumByValue(loginUser.getUserRole());\n        // 没有权限，拒绝\n        if (userRoleEnum == null) {\n            throw new BusinessException(ErrorCode.NO_AUTH_ERROR);\n        }\n        // 要求必须有管理员权限，但用户没有管理员权限，拒绝\n        if (UserRoleEnum.ADMIN.equals(mustRoleEnum) && !UserRoleEnum.ADMIN.equals(userRoleEnum)) {\n            throw new BusinessException(ErrorCode.NO_AUTH_ERROR);\n        }\n        // 通过权限校验，放行\n        return joinPoint.proceed();\n    }\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"DasVd8eqFomEnhx8MjtcVC8xnwf","block_type":5,"heading3":{"elements":[{"text_run":{"content":"使用注解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Xq5QdhA3ZobNMYxwnplctetin7f","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"只要给方法添加了@AuthCheck注解，就必须要登录，否则会抛出异常。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Km5AdmTdSolD0NxbA7ycwyzEn9P","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"可以设置mustRole为管理员，这样仅管理员才能使用该接口：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"AoU5dGOSMoIr2qxaWJ7cPOl7nbh","block_type":14,"code":{"elements":[{"text_run":{"content":"AuthCheck(mustRole = UserConstant.ADMIN_ROLE)","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AoprdFSIFoMXYIxVd1CcD7gBnXX","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"对于不需要登录就能使用的接口，不需要使用该注解。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"ALCNdsQXOojgcLxgpUVcegGTnzc","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户管理","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Ir4qdZDlNoryC2xaEbCc6xdrnEg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"用户管理功能具体可以拆分为：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"ZokydQgg5o9udnxFiB5cl19tnBf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"【管理员】创建用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XphJdjpoCowbwqx0zI8c8SCmnjb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"【管理员】根据id删除用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"B0ILdzSdEoY1UWxdMa9cz2arnRd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"【管理员】更新用户","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KDgFd4vQKolSJAxc5ZxcAC99nFc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"【管理员】分页获取用户列表（需要脱敏）","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OPVYdM0WJoTaWVxWQKMcKgofnug","block_type":12,"bullet":{"elements":[{"text_run":{"content":"【管理员】根据id获取用户（未脱敏）","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Tavwdz4cpou7M3xgu5Xcff08nxc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"根据 id获取用户(脱敏)","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"VQendSOYfocdkhxSDiLcD2zznmc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"数据模型","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Tcgxdb7AsofhTUxInhMcYfxenIb","block_type":13,"ordered":{"elements":[{"text_run":{"content":"每个操作都需要提供一个请求类，都放在dto.user包下。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AleKdcgeKocEtmxyx97cfMd6n8g","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"用户创建请求","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"BJb3dq0poodtvGxDTeqcN23jnmc","block_type":14,"code":{"elements":[{"text_run":{"content":"@Data\npublic class UserAddRequest implements Serializable {\n\n    /**\n     * 用户昵称\n     */\n    private String userName;\n\n    /**\n     * 账号\n     */\n    private String userAccount;\n\n    /**\n     * 用户头像\n     */\n    private String userAvatar;\n\n    /**\n     * 用户简介\n     */\n    private String userProfile;\n\n    /**\n     * 用户角色: user, admin\n     */\n    private String userRole;\n\n    private static final long serialVersionUID = 1L;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":9,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Dii1dG7j4oVsgLx8RjtcLpecntb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"用户更新请求","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"VBaNduEjjowtByxTZlpc0ErInBf","block_type":14,"code":{"elements":[{"text_run":{"content":"@Data\npublic class UserUpdateRequest implements Serializable {\n\n    /**\n     * id\n     */\n    private Long id;\n\n    /**\n     * 用户昵称\n     */\n    private String userName;\n\n    /**\n     * 用户头像\n     */\n    private String userAvatar;\n\n    /**\n     * 简介\n     */\n    private String userProfile;\n\n    /**\n     * 用户角色：user/admin\n     */\n    private String userRole;\n\n    private static final long serialVersionUID = 1L;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":9,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"G9ZcdYDXZoVZd3xjdAKche5Lnyg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"用户查询请求","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"K5e8d9pTNoFkBDxNwREcXPgXnGh","block_type":14,"code":{"elements":[{"text_run":{"content":"@EqualsAndHashCode(callSuper = true)\n@Data\npublic class UserQueryRequest extends PageRequest implements Serializable {\n\n    /**\n     * id\n     */\n    private Long id;\n\n    /**\n     * 用户昵称\n     */\n    private String userName;\n\n    /**\n     * 账号\n     */\n    private String userAccount;\n\n    /**\n     * 简介\n     */\n    private String userProfile;\n\n    /**\n     * 用户角色：user/admin/ban\n     */\n    private String userRole;\n\n    private static final long serialVersionUID = 1L;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":9,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XBGzdAYmGoydwzxl1Lecu9gUnph","block_type":13,"ordered":{"elements":[{"text_run":{"content":"由于要提供获取用户信息的接口，需要和获取当前登录用户接口一样对用户信息进行脱敏。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"auto"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Y01ld9nnzoFBMwxCL5MclMs2nRg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"在model.vo包下新建UserVO，表示脱敏后的用户：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"HpRQdG8yGogWjlxW3MNc0fDLnnB","block_type":14,"code":{"elements":[{"text_run":{"content":"@Data\npublic class UserVO implements Serializable {\n\n    /**\n     * id\n     */\n    private Long id;\n    \n    /**\n     * 账号\n     */\n    private String userAccount;\n\n    /**\n     * 用户昵称\n     */\n    private String userName;\n\n    /**\n     * 用户头像\n     */\n    private String userAvatar;\n\n    /**\n     * 用户简介\n     */\n    private String userProfile;\n\n    /**\n     * 用户角色：user/admin\n     */\n    private String userRole;\n\n    /**\n     * 创建时间\n     */\n    private Date createTime;\n\n    private static final long serialVersionUID = 1L;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":9,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"RVyRduklCoy9xExCqsmc77AGnos","block_type":5,"heading3":{"elements":[{"text_run":{"content":"服务开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WtDJdP178oNTMBxlRtIcXOudnXh","block_type":13,"ordered":{"elements":[{"text_run":{"content":"在UserService中编写获取脱敏后的单个用户信息、获取脱敏后的用户列表方法：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"HNL6dUFJoo3UzgxjndMcIqBXnMd","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic UserVO getUserVO(User user) {\n    if (user == null) {\n        return null;\n    }\n    UserVO userVO = new UserVO();\n    BeanUtils.copyProperties(user, userVO);\n    return userVO;\n}\n\n@Override\npublic List<UserVO> getUserVOList(List<User> userList) {\n    if (CollUtil.isEmpty(userList)) {\n        return new ArrayList<>();\n    }\n    return userList.stream().map(this::getUserVO).collect(Collectors.toList());\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":56,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Mtz0dCkntoCgmOx08L5cisssnLu","block_type":13,"ordered":{"elements":[{"text_run":{"content":"除了上述方法外，对于分页查询接口，需要根据用户传入的参数来构造SQL查询。由于使用MyBatisPlus框架，不用自己拼接SQL了，而是通过构造QueryWrapper 对象来生成SQL查询。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"auto"}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"DLkGdfuQvomK7Sxkm7jcbW11nTe","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"可以在UserService中编写一个方法，专门用于将查询请求转为QueryWrapper 对象：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Vl0Hd67rDoKU6Zx13S1crMgUn0g","block_type":14,"code":{"elements":[{"text_run":{"content":"@Override\npublic QueryWrapper<User> getQueryWrapper(UserQueryRequest userQueryRequest) {\n    if (userQueryRequest == null) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR, \"请求参数为空\");\n    }\n    Long id = userQueryRequest.getId();\n    String userAccount = userQueryRequest.getUserAccount();\n    String userName = userQueryRequest.getUserName();\n    String userProfile = userQueryRequest.getUserProfile();\n    String userRole = userQueryRequest.getUserRole();\n    String sortField = userQueryRequest.getSortField();\n    String sortOrder = userQueryRequest.getSortOrder();\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq(ObjUtil.isNotNull(id), \"id\", id);\n    queryWrapper.eq(StrUtil.isNotBlank(userRole), \"userRole\", userRole);\n    queryWrapper.like(StrUtil.isNotBlank(userAccount), \"userAccount\", userAccount);\n    queryWrapper.like(StrUtil.isNotBlank(userName), \"userName\", userName);\n    queryWrapper.like(StrUtil.isNotBlank(userProfile), \"userProfile\", userProfile);\n    queryWrapper.orderBy(StrUtil.isNotEmpty(sortField), sortOrder.equals(\"ascend\"), sortField);\n    return queryWrapper;\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"TGbKdXLEcotxLSxjkY7cqTl8nYe","block_type":5,"heading3":{"elements":[{"text_run":{"content":"接口开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Xx34dPNcVosG0SxVe4XcV3dMnod","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"上述功能其实都是样板代码，俗称“增删改查”。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"UpahdYGN4oaPPHxlShmcQPyOn4g","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"代码实现比较简单，注意添加对应的权限注解、做好参数校验即可：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"I5qadKLfmosaKqxRZmzcVcsQnaf","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * 创建用户\n */\n@PostMapping(\"/add\")\n@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)\npublic BaseResponse<Long> addUser(@RequestBody UserAddRequest userAddRequest) {\n    ThrowUtils.throwIf(userAddRequest == null, ErrorCode.PARAMS_ERROR);\n    User user = new User();\n    BeanUtils.copyProperties(userAddRequest, user);\n    // 默认密码 12345678\n    final String DEFAULT_PASSWORD = \"12345678\";\n    String encryptPassword = userService.getEncryptPassword(DEFAULT_PASSWORD);\n    user.setUserPassword(encryptPassword);\n    boolean result = userService.save(user);\n    ThrowUtils.throwIf(!result, ErrorCode.OPERATION_ERROR);\n    return ResultUtils.success(user.getId());\n}\n\n/**\n * 根据 id 获取用户（仅管理员）\n */\n@GetMapping(\"/get\")\n@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)\npublic BaseResponse<User> getUserById(long id) {\n    ThrowUtils.throwIf(id <= 0, ErrorCode.PARAMS_ERROR);\n    User user = userService.getById(id);\n    ThrowUtils.throwIf(user == null, ErrorCode.NOT_FOUND_ERROR);\n    return ResultUtils.success(user);\n}\n\n/**\n * 根据 id 获取包装类\n */\n@GetMapping(\"/get/vo\")\npublic BaseResponse<UserVO> getUserVOById(long id) {\n    BaseResponse<User> response = getUserById(id);\n    User user = response.getData();\n    return ResultUtils.success(userService.getUserVO(user));\n}\n\n/**\n * 删除用户\n */\n@PostMapping(\"/delete\")\n@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)\npublic BaseResponse<Boolean> deleteUser(@RequestBody DeleteRequest deleteRequest) {\n    if (deleteRequest == null || deleteRequest.getId() <= 0) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR);\n    }\n    boolean b = userService.removeById(deleteRequest.getId());\n    return ResultUtils.success(b);\n}\n\n/**\n * 更新用户\n */\n@PostMapping(\"/update\")\n@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)\npublic BaseResponse<Boolean> updateUser(@RequestBody UserUpdateRequest userUpdateRequest) {\n    if (userUpdateRequest == null || userUpdateRequest.getId() == null) {\n        throw new BusinessException(ErrorCode.PARAMS_ERROR);\n    }\n    User user = new User();\n    BeanUtils.copyProperties(userUpdateRequest, user);\n    boolean result = userService.updateById(user);\n    ThrowUtils.throwIf(!result, ErrorCode.OPERATION_ERROR);\n    return ResultUtils.success(true);\n}\n\n/**\n * 分页获取用户封装列表（仅管理员）\n *\n * @param userQueryRequest 查询请求参数\n */\n@PostMapping(\"/list/page/vo\")\n@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)\npublic BaseResponse<Page<UserVO>> listUserVOByPage(@RequestBody UserQueryRequest userQueryRequest) {\n    ThrowUtils.throwIf(userQueryRequest == null, ErrorCode.PARAMS_ERROR);\n    long current = userQueryRequest.getCurrent();\n    long pageSize = userQueryRequest.getPageSize();\n    Page<User> userPage = userService.page(new Page<>(current, pageSize),\n            userService.getQueryWrapper(userQueryRequest));\n    Page<UserVO> userVOPage = new Page<>(current, pageSize, userPage.getTotal());\n    List<UserVO> userVOList = userService.getUserVOList(userPage.getRecords());\n    userVOPage.setRecords(userVOList);\n    return ResultUtils.success(userVOPage);\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"O8BGdjIShobLaqxkuqvcLoDdn5b","block_type":5,"heading3":{"elements":[{"text_run":{"content":"分页功能修复","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"FJBddakOgoABDVxsDgAcGsoVnPh","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"必须要注意，本项目使用的v3.5.9版本引入分页插件的方式和之前不同！3.5.9版本后需要独立安装分页插件依赖！！！","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":" ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"C8ttdcjTnoF4nvxNt0ucq7OIntb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"引入插件依赖","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"RPd9dnfPcojgPox2oKfcqWd1nNh","block_type":14,"code":{"elements":[{"text_run":{"content":"<!-- MyBatis Plus 分页插件 -->\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-jsqlparser-4.9</artifactId>\n</dependency>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":66,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"E6EPdhEDio5SokxlmmLcSxx9nOh","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"光引入这一条，大概率是无法成功","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"S1hid8xoco4NjIxEsHGcklybngc","block_type":14,"code":{"elements":[{"text_run":{"content":"<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-dependencies</artifactId>\n            <version>${spring-boot.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>com.baomidou</groupId>\n            <artifactId>mybatis-plus-bom</artifactId>\n            <version>3.5.9</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"</dependencyManagement>","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":66,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WJRad9YS1oDbj6xKB1AcV7Wwnhe","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"依赖下载成功后，在config包下新建MyBatisPlus拦截器配置，添加分页插件：","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"JU0ZdBEOto2E88xYL1cchppynEh","block_type":14,"code":{"elements":[{"text_run":{"content":"@Configuration\n@MapperScan(\"com.yupi.yupicturebackend.mapper\")\npublic class MyBatisPlusConfig {\n\n    /**\n     * 拦截器配置\n     *\n     * @return {@link MybatisPlusInterceptor}\n     */\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusInterceptor() {\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        // 分页插件\n        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));\n        return interceptor;\n    }\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KWCAd9VZxo9NTUxjrwLcovOKnue","block_type":5,"heading3":{"elements":[{"text_run":{"content":"数据精度修复","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"P2ASdwMRGowu98xS0ANcycmSnSf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"但是，在测试中，如果你打开F12控制台，利用预览来查看响应数据，就会发现另一个问题：id的最后两位好像都变成0了！","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"S8rxdknEWoKvd3xww95cpGLNnyc","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"这是由于前端JS的精度范围有限，我们后端返回的id范围过大，导致前端精度丢失，会影响前端页面获取到的数据结果。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Ni4hdGsKaopFfaxpiyJcTw46nVb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"为了解决这个问题，可以在后端config包下新建一个全局JSON配置，将整个后端SpringMVC接口返回值的长整型数","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"PkhFdcAKAogx4cxZAp6cgh52nfg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"字转换为字符串进行返回，从而集中解决问题。","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"AtBudwIbioyi6BxPWo0cYGexn6i","block_type":14,"code":{"elements":[{"text_run":{"content":"/**\n * Spring MVC Json 配置\n */\n@JsonComponent\npublic class JsonConfig {\n\n    /**\n     * 添加 Long 转 json 精度丢失的配置\n     */\n    @Bean\n    public ObjectMapper jacksonObjectMapper(Jackson2ObjectMapperBuilder builder) {\n        ObjectMapper objectMapper = builder.createXmlMapper(false).build();\n        SimpleModule module = new SimpleModule();\n        module.addSerializer(Long.class, ToStringSerializer.instance);\n        module.addSerializer(Long.TYPE, ToStringSerializer.instance);\n        objectMapper.registerModule(module);\n        return objectMapper;\n    }\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":29,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"PKkndey6noFa6zxP2BVcsX5MnWb","block_type":3,"heading1":{"elements":[{"text_run":{"content":"前端开发","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Ej8KdOYS1o6QL4xYFJccCM7snB6","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户注册功能","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Ml1Wdur6iovA0mxx4R2cPxa1nVb","block_type":5,"heading3":{"elements":[{"text_run":{"content":"页面代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ByZBdxzusoDDioxwXuScAKvOnhN","block_type":14,"code":{"elements":[{"text_run":{"content":"<template>\n  <div class=\"center\">\n    <h1>Sign in/ Sign up</h1>\n    <div class=\"logon\">\n      <div :class=\"overlaylong\">\n        <div class=\"overlaylong-Signup\" v-if=\"disfiex == 1\">\n          <h2 class=\"overlaylongH2\">Registered Account</h2>\n          <a-form\n            style=\"max-width: 700px; margin: 0 auto\"\n            label-align=\"left\"\n            :label-col=\"{ span: 7 }\"\n            :wrapper-col=\"{ span: 20 }\"\n            :model=\"form2\"\n            @finish=\"handleRegister\"\n          >\n            <a-form-item\n              name=\"userAccount\"\n              label=\"账号\"\n              :rules=\"[\n                { required: true, message: '请输入账号' },\n                { min: 4, message: '账号不少于 4 位' },\n                { max: 20, message: '账号不超过 20 位' },\n              ]\"\n            >\n              <a-input\n                style=\"width: 200px\"\n                v-model:value=\"form2.userAccount\"\n                placeholder=\"请输入账号\"\n              />\n            </a-form-item>\n            <a-form-item\n              name=\"userPassword\"\n              label=\"密码\"\n              :rules=\"[\n                { required: true, message: '请输入密码' },\n                { min: 8, message: '密码不少于 8 位' },\n                { max: 20, message: '密码不超过 20 位' },\n                {\n                  pattern: passwordPattern,\n                  message: '密码必须包含大小写字母、数字和特殊符号',\n                },\n              ]\"\n            >\n              <a-input-password\n                style=\"width: 200px\"\n                v-model:value=\"form2.userPassword\"\n                placeholder=\"请输入密码\"\n              />\n            </a-form-item>\n            <a-form-item\n              name=\"checkPassword\"\n              label=\"确认密码\"\n              :rules=\"[\n                { required: true, message: '请再次输入密码' },\n                { min: 8, message: '密码不少于 8 位' },\n                { max: 20, message: '密码不超过 20 位' },\n                {\n                  pattern: passwordPattern,\n                  message: '密码必须包含大小写字母、数字和特殊符号',\n                },\n              ]\"\n            >\n              <a-input-password\n                style=\"width: 200px\"\n                v-model:value=\"form2.checkPassword\"\n                placeholder=\"请输入确认密码\"\n              />\n            </a-form-item>\n            <a-form-item :wrapper-col=\"{ offset: 4, span: 20 }\">\n              <a-button type=\"primary\" html-type=\"submit\" class=\"inupbutton\">注册</a-button>\n            </a-form-item>\n          </a-form>\n        </div>\n      </div>\n      <div :class=\"overlaytitle\">\n        <div class=\"overlaytitle-Signup\" v-if=\"disfiex == 1\">\n          <h2 class=\"overlaytitleH2\">Welcome Back!</h2>\n          <p class=\"overlaytitleP\">\n            To keep connected with us please login with your personal info\n          </p>\n          <div class=\"buttongohs\" @click=\"Signup\">Sign in</div>\n        </div>\n      </div>\n    </div>\n  </div>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"</template>","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":24,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"YjOFdOd4No36CwxfRO1cbbmRnRh","block_type":5,"heading3":{"elements":[{"text_run":{"content":"JS代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"FQXpde97Vo5xc1xXtE2cxNugn9f","block_type":14,"code":{"elements":[{"text_run":{"content":"import { reactive } from 'vue'\nimport { useLoginUserStore } from '@/stores/useLoginUserStore'\nimport { useRouter } from 'vue-router'\nimport { userRegisterUsingPost } from '@/api/userController'\nimport { message } from 'ant-design-vue'\n\n// 密码强度验证规则：要求至少包含3种字符类型（大小写字母、数字、特殊符号）\nconst passwordPattern = /^((?=.*[a-z])(?=.*[A-Z])(?=.*\\d)|(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])|(?=.*[a-z])(?=.*\\d)(?=.*[^A-Za-z0-9])|(?=.*[A-Z])(?=.*\\d)(?=.*[^A-Za-z0-9])).*$/\n\n// 注册表单数据模型\nconst form2 = reactive({\n  userAccount: '',\n  userPassword: '',\n  checkPassword: '',\n})\n\n// 注册处理函数\nconst handleRegister = async () => {\n  // 验证两次密码是否一致\n  if (form2.checkPassword !== form2.userPassword) {\n    message.error('二次输入的密码不一致')\n    return\n  }\n\n  try {\n    // 调用后端注册API\n    const res = await userRegisterUsingPost(form2)\n    if (res.data.code === 0 && res.data.data) {\n      message.success('注册成功')\n      // 注册成功后重置表单\n      Object.assign(form2, {\n        userAccount: '',\n        userPassword: '',\n        checkPassword: '',\n      })\n      // 切换到登录界面\n      disfiex.value = 0\n    } else {\n      message.error('注册失败: ' + (res.data.description || '未知错误'))\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Registration error:', error)\n  }\n}\n\n// 界面切换逻辑\nconst disfiex = ref(0)\nconst Signin = () => {\n  // 切换到登录界面的动画效果\n  overlaylong.value = 'overlaylongleft'\n  overlaytitle.value = 'overlaytitleright'\n  disfiex.value = 1\n}\n\nconst Signup = () => {\n  // 切换到注册界面的动画效果\n  overlaylong.value = 'overlaylongright'\n  overlaytitle.value = 'overlaytitleleft'\n  disfiex.value = 0\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":30,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"U5FQd0FUkokcmSxjnolcgqMAnsb","block_type":5,"heading3":{"elements":[{"text_run":{"content":"技术详解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"X0cedPFvAoyawFxmtbvc87wQnfg","block_type":6,"heading4":{"elements":[{"text_run":{"content":"核心功能点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"VJGRdYJprodTOtxD17Bcyarlnqc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"表单验证机制","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：实现账号长度校验（4-20位）和密码强度校验（8-20位，至少包含3种字符类型）。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"IOvJdHWOkogtAVxorzpc46NanHb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"双密码一致性验证","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：注册时要求两次输入密码一致，避免用户输入错误。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"SWR2dZJhAo1GV0xzaY7cSQUknXc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"后端API集成","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"userRegisterUsingPost","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"接口提交注册数据，并处理响应结果。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"YYYwdxm8MoUatAxQg8QcVfdcnph","block_type":12,"bullet":{"elements":[{"text_run":{"content":"界面交互切换","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：注册成功后自动切换到登录界面，并重置表单数据。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Lr6pd7nbfoNsWzxSVlncOujxnDg","block_type":6,"heading4":{"elements":[{"text_run":{"content":"技术要点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"CrFEdsM20oCFaGxry3Rcd6UGn5e","block_type":12,"bullet":{"elements":[{"text_run":{"content":"密码强度规则设计","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：正则表达式","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"passwordPattern","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"要求密码至少包含以下组合中的一种：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["WEPRdrUlIorNg3xFKstcmUfenht","OOS0dBQZPoU3BZxDH0VctkUVnVc","YPsNdqWwMoBW90xNpnhcxKPfnPf","Zz1udl0hqo0yeYxW33lc9RYdnH2"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WEPRdrUlIorNg3xFKstcmUfenht","block_type":12,"bullet":{"elements":[{"text_run":{"content":"小写字母+大写字母+数字  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CrFEdsM20oCFaGxry3Rcd6UGn5e"},{"block_id":"OOS0dBQZPoU3BZxDH0VctkUVnVc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"小写字母+大写字母+特殊符号  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CrFEdsM20oCFaGxry3Rcd6UGn5e"},{"block_id":"YPsNdqWwMoBW90xNpnhcxKPfnPf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"小写字母+数字+特殊符号  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CrFEdsM20oCFaGxry3Rcd6UGn5e"},{"block_id":"Zz1udl0hqo0yeYxW33lc9RYdnH2","block_type":12,"bullet":{"elements":[{"text_run":{"content":"大写字母+数字+特殊符号  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CrFEdsM20oCFaGxry3Rcd6UGn5e"},{"block_id":"RyD6dy4CAoCYE9xl6QEc2f77ng0","block_type":12,"bullet":{"elements":[{"text_run":{"content":"响应式表单处理","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：使用Ant Design Vue的","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"a-form","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"组件，通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"rules","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"属性定义实时验证规则，错误提示由组件自动生成。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KMj5dnXHMoEB0axPIOQchjhonPe","block_type":12,"bullet":{"elements":[{"text_run":{"content":"状态管理集成","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：注册成功后未直接操作全局状态，而是通过路由和界面切换实现流程闭环，状态更新由","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"useLoginUserStore","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"统一管理。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Mil0dsGVoouJGyx1N7ecrljznZd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"动画交互实现","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"overlaylong","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"和","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"overlaytitle","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"类名的动态切换，结合CSS的","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"transform","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"和","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"transition","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"属性实现界面滑动效果。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"KF7mdmR1Mo3zuVx4IxgcgsuPnzh","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户登录功能","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"DHgyds9HNoqUL5xfxKRcmMyBnwe","block_type":5,"heading3":{"elements":[{"text_run":{"content":"页面代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"PgjFdtSwLos3Cix02ypcYAPcnEe","block_type":14,"code":{"elements":[{"text_run":{"content":"<template>\n  <div class=\"center\">\n    <h1>Sign in/ Sign up</h1>\n    <div class=\"logon\">\n      <div :class=\"overlaylong\">\n        <div class=\"overlaylong-Signin\" v-if=\"disfiex == 0\">\n          <h2 class=\"overlaylongH2\">Sign in</h2>\n          <a-form\n            style=\"max-width: 700px; margin: 0 auto\"\n            label-align=\"left\"\n            :label-col=\"{ span: 4 }\"\n            :wrapper-col=\"{ span: 20 }\"\n            :model=\"form1\"\n            @finish=\"handleLogin\"\n          >\n            <a-form-item\n              name=\"userAccount\"\n              label=\"账号\"\n              :rules=\"[\n                { required: true, message: '请输入账号' },\n                { min: 4, message: '账号不少于 4 位' },\n                { max: 20, message: '账号不超过 20 位' },\n              ]\"\n            >\n              <a-input\n                style=\"width: 250px\"\n                v-model:value=\"form1.userAccount\"\n                placeholder=\"请输入账号\"\n              />\n            </a-form-item>\n            <a-form-item\n              name=\"userPassword\"\n              label=\"密码\"\n              :rules=\"[\n                { required: true, message: '请输入密码' },\n                { min: 8, message: '密码不少于 8 位' },\n                { max: 20, message: '密码不超过 20 位' },\n                {\n                  pattern: passwordPattern,\n                  message: '密码必须包含大小写字母、数字和特殊符号',\n                },\n              ]\"\n            >\n              <a-input-password\n                style=\"width: 250px\"\n                v-model:value=\"form1.userPassword\"\n                placeholder=\"请输入密码\"\n              />\n              <h3 @click=\"message.info('请联系管理员')\">Forgot your password?</h3>\n            </a-form-item>\n            <a-form-item :wrapper-col=\"{ offset: 4, span: 20 }\">\n              <a-button type=\"primary\" html-type=\"submit\" class=\"inupbutton\">登录</a-button>\n            </a-form-item>\n          </a-form>\n        </div>\n      </div>\n      <div :class=\"overlaytitle\">\n        <div class=\"overlaytitle-Signin\" v-if=\"disfiex == 0\">\n          <h2 class=\"overlaytitleH2\">Hello,Friend!</h2>\n          <p class=\"overlaytitleP\">Enter your personal details and start journey with us</p>\n          <div class=\"buttongohs\" @click=\"Signin\">Sign up</div>\n        </div>\n      </div>\n    </div>\n  </div>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"</template>","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":24,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"O3ojdk5I8o5mW3xmXTxcvAbCnld","block_type":5,"heading3":{"elements":[{"text_run":{"content":"JS代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"L5yxdc8fXowLQqxWuMzc1SyinEe","block_type":14,"code":{"elements":[{"text_run":{"content":"import { reactive, ref } from 'vue'\nimport { useLoginUserStore } from '@/stores/useLoginUserStore'\nimport { useRouter } from 'vue-router'\nimport { userLoginUsingPost } from '@/api/userController'\nimport { message } from 'ant-design-vue'\n\nconst router = useRouter()\nconst loginUserStore = useLoginUserStore()\nconst passwordPattern = /^((?=.*[a-z])(?=.*[A-Z])(?=.*\\d)|(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])|(?=.*[a-z])(?=.*\\d)(?=.*[^A-Za-z0-9])|(?=.*[A-Z])(?=.*\\d)(?=.*[^A-Za-z0-9])).*$/\n\n// 登录表单数据模型\nconst form1 = reactive({\n  userAccount: '',\n  userPassword: '',\n})\n\n// 登录处理函数\nconst handleLogin = async () => {\n  try {\n    // 调用后端登录API\n    const res = await userLoginUsingPost(form1)\n    if (res.data.code === 0 && res.data.data) {\n      // 刷新登录用户状态\n      await loginUserStore.fetchLoginUser()\n      message.success('登录成功')\n      // 跳转首页并替换历史记录\n      router.push({\n        path: '/',\n        replace: true,\n      })\n    } else {\n      message.error('登录失败: ' + (res.data.description || '未知错误'))\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Login error:', error)\n  }\n}\n\n// 界面切换逻辑（同注册功能）\nconst disfiex = ref(0)\nconst overlaylong = ref('overlaylong')\nconst overlaytitle = ref('overlaytitle')\n\nconst Signin = () => {\n  overlaylong.value = 'overlaylongleft'\n  overlaytitle.value = 'overlaytitleright'\n  disfiex.value = 1\n}\n\nconst Signup = () => {\n  overlaylong.value = 'overlaylongright'\n  overlaytitle.value = 'overlaytitleleft'\n  disfiex.value = 0\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":30,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"VsqOdtkCpoxdfexjHTecDFajnje","block_type":5,"heading3":{"elements":[{"text_run":{"content":"技术详解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ZLZldxws3oYBBlxtYZiccVWlnjc","block_type":6,"heading4":{"elements":[{"text_run":{"content":"核心功能点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"IbIbdbjM2ooQUkxRU07cq0RDnwh","block_type":12,"bullet":{"elements":[{"text_run":{"content":"登录认证流程","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：验证账号密码合法性，调用API完成登录，并跳转首页。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Qf2ddhVHBo7oKdxe2klcSB93nfd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"状态管理集成","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"useLoginUserStore","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"获取登录用户信息，实现全局状态共享。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ExDnd1RFioYMfdxK0KFcTtnGnsd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"路由导航控制","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"router.push","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"实现页面跳转，","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"replace: true","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"避免历史记录冗余。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"EFGjdYLmCoA4utxoqfFcZB6Jnae","block_type":12,"bullet":{"elements":[{"text_run":{"content":"错误处理机制","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：区分网络错误、认证失败等场景，提供明确的用户提示。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"J83odHv0wohBS5xahelcWVgynve","block_type":6,"heading4":{"elements":[{"text_run":{"content":"技术要点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"X01EdC6fcorb62xf40tcOAainbg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"API调用与状态同步","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["WXVKdyENFoQB1QxfHwdc9hZqnNc","VlkXdqquwoBqPCxKxoVcmPnmn7c"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WXVKdyENFoQB1QxfHwdc9hZqnNc","block_type":13,"ordered":{"elements":[{"text_run":{"content":"登录成功后通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"loginUserStore.fetchLoginUser()","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"刷新用户状态，确保全局数据一致性。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"1"}},"parent_id":"X01EdC6fcorb62xf40tcOAainbg"},{"block_id":"VlkXdqquwoBqPCxKxoVcmPnmn7c","block_type":13,"ordered":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"async/await","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"处理异步请求，避免回调地狱，提升代码可读性。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false,"sequence":"auto"}},"parent_id":"X01EdC6fcorb62xf40tcOAainbg"},{"block_id":"D3VOdDOuioiJCQxaQGfcjTTcn8e","block_type":12,"bullet":{"elements":[{"text_run":{"content":"安全策略设计","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["HHLidapLoou7x1xdUkccFLsFnIb","JC4xdwuwtoP4yWxhIqbcHUgjnGb"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"HHLidapLoou7x1xdUkccFLsFnIb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"密码输入使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"a-input-password","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"组件隐藏明文，防止窥屏泄露。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"D3VOdDOuioiJCQxaQGfcjTTcn8e"},{"block_id":"JC4xdwuwtoP4yWxhIqbcHUgjnGb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"错误提示不暴露具体失败原因（如“账号不存在”或“密码错误”），避免安全漏洞。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"D3VOdDOuioiJCQxaQGfcjTTcn8e"},{"block_id":"Nf7Ddbbz6ooXcaxjgAecnuQ8nug","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户体验优化","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["SBr8dBbvMoEtJixSsUrcDRtJnOe","RzDTddXT2o7OQ4x7LuDcuyO6nWd"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"SBr8dBbvMoEtJixSsUrcDRtJnOe","block_type":12,"bullet":{"elements":[{"text_run":{"content":"登录成功后自动跳转首页，提升操作流畅性。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Nf7Ddbbz6ooXcaxjgAecnuQ8nug"},{"block_id":"RzDTddXT2o7OQ4x7LuDcuyO6nWd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"提供“忘记密码”交互入口（虽未实现完整逻辑，但预留交互点）。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Nf7Ddbbz6ooXcaxjgAecnuQ8nug"},{"block_id":"JeyddX7cAoTb9LxCebJc18ZXnSc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"界面切换动画","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过CSS变换实现左右分栏的滑动效果，","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"transition: transform 0.6s ease-in-out","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"保证动画平滑过渡。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"FS6wdBBsMorxgWxrOQhc8d7Ensb","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户注销功能","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OUY3d8IuWogAMXxTEVSc4PaLnIC","block_type":5,"heading3":{"elements":[{"text_run":{"content":"页面代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JJtZdHProoTplpxhufnc4RHJn8g","block_type":14,"code":{"elements":[{"text_run":{"content":"<template>\n  <div id=\"globalHeader\">\n   \n      <a-col flex=\"200px\">\n                <a-avatar v-else style=\"background-color: #1890ff\">\n                  {{ loginUserStore.loginUser.userName?.charAt(0) || 'U' }}\n                </a-avatar>\n                {{ loginUserStore.loginUser.userName ?? '无名' }}\n              </ASpace>\n              <template #overlay>\n                <a-menu>\n                  <a-menu-item @click=\"doLogout\">\n                    <LogoutOutlined />\n                    退出登录\n                  </a-menu-item>\n                </a-menu>\n              </template>\n            </a-dropdown>\n          </div>\n        </div>\n  </div>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"</template>","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":24,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AHchdkJlzoM9oYxYuzGcXp0TnIh","block_type":5,"heading3":{"elements":[{"text_run":{"content":" JS代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QtdndoxiVo4mDHxtEUuc89yvnDb","block_type":14,"code":{"elements":[{"text_run":{"content":"import { computed, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { message } from 'ant-design-vue'\nimport { useLoginUserStore } from '@/stores/useLoginUserStore'\nimport { userLogoutUsingPost } from '@/api/userController'\n\nconst loginUserStore = useLoginUserStore()\nconst router = useRouter()\n\n// 用户注销核心函数\nconst doLogout = async () => {\n  try {\n    const res = await userLogoutUsingPost()\n    if (res.data.code === 0) {\n      // 清空登录状态\n      loginUserStore.setLoginUser({ userName: '未登录' })\n      message.success('退出登录成功')\n      // 跳转登录页\n      await router.push('/user/login')\n    } else {\n      message.error('退出登录失败：' + res.data.message)\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Logout error:', error)\n  }\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"}","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":30,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"DSead4GGMooqpIxu05acu908nIh","block_type":5,"heading3":{"elements":[{"text_run":{"content":"技术详解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JqnYd98fTogMIqxXVuFcQF3tnFe","block_type":6,"heading4":{"elements":[{"text_run":{"content":"核心功能点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"K5AJdlZkmol3CFxGjpvcNdeHn9g","block_type":12,"bullet":{"elements":[{"text_run":{"content":"注销流程控制","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：调用后端注销接口","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"userLogoutUsingPost","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"，清除客户端登录状态并跳转登录页。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"A2h0dHx9BoMNcJxlwSFcvDX6npc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"权限动态过滤","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：根据用户角色（","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"userRole","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"）动态过滤菜单，非管理员隐藏","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"/admin","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"相关选项。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"LE4tdfl0AoqARBxFDqicQv83nMd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"状态同步机制","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"useLoginUserStore","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"全局状态管理，确保注销后所有页面登录状态一致更新。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"LlQQdEy5AoPHKdxI6iGcjxMVnoe","block_type":6,"heading4":{"elements":[{"text_run":{"content":"技术要点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Y0c4d6uL2o6F28xv2OQcxtiSnff","block_type":12,"bullet":{"elements":[{"text_run":{"content":"注销接口交互","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["C6EMdeCwmolQuZx5NVLcNMfsnIf","FTKWdT7fcoFlfqxd7wacvQECnoc"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"C6EMdeCwmolQuZx5NVLcNMfsnIf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"采用POST请求方式调用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"userLogoutUsingPost","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"，符合RESTful接口规范。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Y0c4d6uL2o6F28xv2OQcxtiSnff"},{"block_id":"FTKWdT7fcoFlfqxd7wacvQECnoc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"响应结果通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"res.data.code === 0","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"判断请求成功，避免强依赖HTTP状态码。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Y0c4d6uL2o6F28xv2OQcxtiSnff"},{"block_id":"HRSdd2MVgoeCzqxfRU6c8nkVnIb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"状态管理设计","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["Ooi7doaOFoAVuXxEPf9cN6Ognzd","I1kIdTSCAoqeCIxwrCScbBkpn4d"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Ooi7doaOFoAVuXxEPf9cN6Ognzd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"loginUserStore.setLoginUser","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"方法用于清空用户信息，触发全局状态更新。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"HRSdd2MVgoeCzqxfRU6c8nkVnIb"},{"block_id":"I1kIdTSCAoqeCIxwrCScbBkpn4d","block_type":12,"bullet":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"async/await","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"确保注销流程完成后再执行页面跳转，避免状态不一致。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"HRSdd2MVgoeCzqxfRU6c8nkVnIb"},{"block_id":"NlLEdWiEyovFVNxUvLCcXAdDnJc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"安全策略实现","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["XfOqdTtmeo4O0Vxu4v5cazWWnzg","Fmlnd9hm5oFbIixvL6CcQrRvnvO"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XfOqdTtmeo4O0Vxu4v5cazWWnzg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"注销后强制跳转登录页，防止用户通过浏览器历史记录访问受保护页面。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"NlLEdWiEyovFVNxUvLCcXAdDnJc"},{"block_id":"Fmlnd9hm5oFbIixvL6CcQrRvnvO","block_type":12,"bullet":{"elements":[{"text_run":{"content":"菜单过滤机制避免未授权用户看到管理功能入口，减少安全漏洞风险。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"NlLEdWiEyovFVNxUvLCcXAdDnJc"},{"block_id":"IQIfdHZUboDO3Ix8UHRc4C5jnPg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户体验优化","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["L2uEdNgqdoZkO4xpEoncfSuXnef","MHcBdOrHHoy6zTxJPstcWwuXn1f"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"L2uEdNgqdoZkO4xpEoncfSuXnef","block_type":12,"bullet":{"elements":[{"text_run":{"content":"注销操作通过下拉菜单触发，符合常见Web应用交互习惯。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"IQIfdHZUboDO3Ix8UHRc4C5jnPg"},{"block_id":"MHcBdOrHHoy6zTxJPstcWwuXn1f","block_type":12,"bullet":{"elements":[{"text_run":{"content":"操作结果通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"message.success/error","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"提供明确反馈，提升操作感知度。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"IQIfdHZUboDO3Ix8UHRc4C5jnPg"},{"block_id":"JiKMdcPGAoK3hfxtsoZcXQMnnXc","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户个人简介","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XZ4Ldpzg9oOtvIxyzTWcyO6HnDe","block_type":5,"heading3":{"elements":[{"text_run":{"content":"页面代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"UOJbdZA2DoIrZrxd6YycA6AsnJf","block_type":14,"code":{"elements":[{"text_run":{"content":"<template>\n  <div class=\"userProfilePage\">\n    <a-card :bordered=\"false\" class=\"profile-card\">\n      <div class=\"profile-header\">\n        <a-avatar :size=\"120\" class=\"user-avatar\">\n          <template v-if=\"userData.userAvatar\">\n            <a-image :src=\"userData.userAvatar\" :width=\"120\" />\n          </template>\n          <template v-else>\n            {{ userData.userName?.charAt(0) || 'U' }}\n          </template>\n        </a-avatar>\n        <div class=\"profile-info\">\n          <h2>{{ userData.userName }}</h2>\n          <p class=\"account-info\">@{{ userData.userAccount }}</p>\n          <a-tag :color=\"userData.userRole === 'admin' ? 'red' : 'blue'\">\n            {{ userData.userRole === 'admin' ? '管理员' : '普通用户' }}\n          </a-tag>\n        </div>\n      </div>\n\n      <a-divider />\n\n      <div class=\"profile-details\">\n        <a-descriptions :column=\"1\" bordered>\n          <a-descriptions-item label=\"账号ID\">{{ userData.id }}</a-descriptions-item>\n          <a-descriptions-item label=\"个人简介\">\n            {{ userData.userProfile || '暂无简介' }}\n          </a-descriptions-item>\n          <a-descriptions-item label=\"创建时间\">\n            {{ formatDate(userData.createTime) }}\n          </a-descriptions-item>\n          <a-descriptions-item label=\"最后更新时间\">\n            {{ formatDate(userData.updateTime) }}\n          </a-descriptions-item>\n        </a-descriptions>\n      </div>\n\n      <div class=\"profile-actions\">\n        <a-button type=\"primary\" @click=\"showEditModal\">编辑资料</a-button>\n        <a-button v-if=\"userData.userRole === 'admin'\" style=\"margin-left: 10px\" @click=\"goManage\">\n          管理后台\n        </a-button>\n      </div>\n    </a-card>\n    <a-modal\n      v-model:visible=\"editModalVisible\"\n      title=\"编辑资料\"\n      ok-text=\"保存\"\n      cancel-text=\"取消\"\n      @ok=\"handleEdit\"\n      @cancel=\"handleCancel\"\n    >\n      <a-form :model=\"updateUserForm\" layout=\"vertical\">\n        <a-form-item label=\"用户名\">\n          <a-input v-model:value=\"updateUserForm.userName\" placeholder=\"请输入用户名\" />\n        </a-form-item>\n        <a-form-item label=\"头像URL\">\n          <a-input v-model:value=\"updateUserForm.userAvatar\" placeholder=\"请输入头像URL\" />\n        </a-form-item>\n        <a-form-item label=\"个人简介\">\n          <a-textarea\n            v-model:value=\"updateUserForm.userProfile\"\n            placeholder=\"请输入个人简介\"\n            :auto-size=\"{ minRows: 3, maxRows: 5 }\"\n          />\n        </a-form-item>\n      </a-form>\n    </a-modal>\n  </div>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"</template>","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":24,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Age0dIzFZovPxgxVU3Tc2MpVnlc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"JS代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"QZD9dD8Jkov71Dxd4NucMRconWg","block_type":14,"code":{"elements":[{"text_run":{"content":"import { ref, onMounted, reactive } from 'vue'\nimport { message } from 'ant-design-vue'\nimport { getLoginUserUsingGet } from '@/api/userController'\nimport router from '@/router'\nimport { updateUserSelfUsingPost } from '@/api/userController'\n\nconst editModalVisible = ref(false)\nconst userData = ref({\n  id: '',\n  userAccount: '',\n  userName: '',\n  userAvatar: null,\n  userProfile: null,\n  userRole: '',\n  createTime: '',\n  updateTime: '',\n})\n\nconst updateUserForm = reactive({\n  id: '',\n  userName: '',\n  userAvatar: '',\n  userProfile: '',\n})\n\n// 日期格式化函数\nconst formatDate = (dateString: string) => {\n  if (!dateString) return '未知时间'\n  return new Date(dateString).toLocaleString()\n}\n\n// 获取用户资料\nconst fetchUserProfile = async () => {\n  try {\n    const res = await getLoginUserUsingGet()\n    if (res.data.code === 0 && res.data.data) {\n      userData.value = res.data.data\n    } else {\n      message.error('获取用户信息失败: ' + (res.data.message || '未知错误'))\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Fetch profile error:', error)\n  }\n}\n\n// 显示编辑模态框\nconst showEditModal = () => {\n  updateUserForm.id = userData.value.id\n  updateUserForm.userName = userData.value.userName || ''\n  updateUserForm.userAvatar = userData.value.userAvatar || ''\n  updateUserForm.userProfile = userData.value.userProfile || ''\n  editModalVisible.value = true\n}\n\n// 处理编辑提交\nconst handleEdit = async () => {\n  try {\n    const res = await updateUserSelfUsingPost(updateUserForm)\n    if (res.data.code === 0) {\n      message.success('资料更新成功')\n      editModalVisible.value = false\n      fetchUserProfile() // 刷新用户数据\n    } else {\n      message.error('更新失败: ' + (res.data.message || '未知错误'))\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Update profile error:', error)\n  }\n}\n\n// 取消编辑\nconst handleCancel = () => {\n  editModalVisible.value = false\n}\n\n// 跳转管理后台\nconst goManage = () => {\n  router.push('/admin/user')\n}\n\nonMounted(() => {\n  fetchUserProfile()\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"})","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":30,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"DRg0dnUrhoA8UQxAPYlcVBTvnTb","block_type":5,"heading3":{"elements":[{"text_run":{"content":"技术详解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OmOedS2HwoK2KsxWNt7c3CVSn6c","block_type":6,"heading4":{"elements":[{"text_run":{"content":"核心功能点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XYFcd6cSTofSrvxqQJrcnm6Qn0f","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户资料展示","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：呈现用户基本信息（头像、用户名、账号ID等）和元数据（创建时间、更新时间）。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"FcS1dmID6oaPbqxyJYUcHJzDnLA","block_type":12,"bullet":{"elements":[{"text_run":{"content":"资料编辑功能","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过模态框实现用户名、头像URL、个人简介的修改与提交。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"TzL6dQnESopzUyxYZFBcCbEGnqc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"权限差异化展示","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：根据用户角色（","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"userRole","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"）显示“管理后台”入口，仅管理员可见。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OIR9dMaJgoQmGkxG2gGcDwajnkc","block_type":6,"heading4":{"elements":[{"text_run":{"content":"技术要点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"EdModLXwWoy4bxxqS0Jcu00HnEe","block_type":12,"bullet":{"elements":[{"text_run":{"content":"数据获取与渲染","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["JUInd1VYeowQT3xBvtYc9KvVneo","AlN8dSmESouoepx1KsYczBjNnmb"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JUInd1VYeowQT3xBvtYc9KvVneo","block_type":12,"bullet":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"getLoginUserUsingGet","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"接口获取当前登录用户资料，页面挂载时自动调用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"fetchUserProfile","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"EdModLXwWoy4bxxqS0Jcu00HnEe"},{"block_id":"AlN8dSmESouoepx1KsYczBjNnmb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"通过响应式数据","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"userData","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"绑定页面元素，实现数据动态渲染。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"EdModLXwWoy4bxxqS0Jcu00HnEe"},{"block_id":"CP3jd5yDsojQowx8alCckMGpnEg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"表单交互设计","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["AVISd9xWpoo3osxdO48cDtHgnUc","CkGPd6Sd3o5GfKxOPRJc4P2WnQh"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AVISd9xWpoo3osxdO48cDtHgnUc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"编辑模态框使用Ant Design Vue的","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"a-form","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"组件，支持实时表单验证（虽未显式定义规则，但组件默认校验非空）。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CP3jd5yDsojQowx8alCckMGpnEg"},{"block_id":"CkGPd6Sd3o5GfKxOPRJc4P2WnQh","block_type":12,"bullet":{"elements":[{"text_run":{"content":"updateUserForm","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"reactive","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"定义响应式对象，与表单输入双向绑定，简化数据同步逻辑。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CP3jd5yDsojQowx8alCckMGpnEg"},{"block_id":"Ux3rdLHtnokfqExC8i3cRhUxnLf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"状态更新机制","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["OhHCdwriqoS2e1xaG84cnXgMnMf","QrX7dA5UXoWCgyxULCocEbD3nyt"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"OhHCdwriqoS2e1xaG84cnXgMnMf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"资料更新成功后调用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"fetchUserProfile","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"重新获取数据，确保页面与后端数据一致。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Ux3rdLHtnokfqExC8i3cRhUxnLf"},{"block_id":"QrX7dA5UXoWCgyxULCocEbD3nyt","block_type":12,"bullet":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"editModalVisible","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"控制模态框显示/隐藏，配合","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"@ok","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"和","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"@cancel","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"事件处理交互流程。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Ux3rdLHtnokfqExC8i3cRhUxnLf"},{"block_id":"ClaFdXQ7FoiolGx6OZKcACV9n7d","block_type":12,"bullet":{"elements":[{"text_run":{"content":"响应式布局实现","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["Hv69dixCeo8vmFxmbAAcWnv0nEg","L6VHdDCVmo0GcuxB0AucVb9rnQh"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Hv69dixCeo8vmFxmbAAcWnv0nEg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"通过CSS媒体查询","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"@media (max-width: 768px)","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"实现移动端适配，将头像与信息栏改为垂直排列。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"ClaFdXQ7FoiolGx6OZKcACV9n7d"},{"block_id":"L6VHdDCVmo0GcuxB0AucVb9rnQh","block_type":12,"bullet":{"elements":[{"text_run":{"content":"a-descriptions","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"组件的","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"column=\"1\"","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"属性在小屏幕下优化信息展示结构。  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"ClaFdXQ7FoiolGx6OZKcACV9n7d"},{"block_id":"RKkHdrMEjo9NPax4F1LcLsEtnxf","block_type":4,"heading2":{"elements":[{"text_run":{"content":"用户增删改查","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"NN6kdGpa4oZJSkxZWVBcoSG4nIc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"页面代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"JbDwdVGM9ofPpwxUSDNcxZQpnbg","block_type":14,"code":{"elements":[{"text_run":{"content":"<template>\n  <div id=\"userManagePage\">\n    <!-- 搜索表单 -->\n    <a-form layout=\"inline\" :model=\"searchParams\" @finish=\"doSearch\">\n      <a-form-item label=\"账号\">\n        <a-input v-model:value=\"searchParams.userAccount\" placeholder=\"输入账号\" allow-clear />\n      </a-form-item>\n      <a-form-item label=\"用户名\">\n        <a-input v-model:value=\"searchParams.userName\" placeholder=\"输入用户名\" allow-clear />\n      </a-form-item>\n      <a-form-item label=\"用户角色\">\n        <a-select\n          v-model:value=\"searchParams.userRole\"\n          placeholder=\"选择角色\"\n          style=\"width: 120px\"\n          allow-clear\n        >\n          <a-select-option value=\"admin\">管理员</a-select-option>\n          <a-select-option value=\"user\">普通用户</a-select-option>\n        </a-select>\n      </a-form-item>\n      <a-form-item>\n        <a-button :icon=\"h(SearchOutlined)\" type=\"primary\" html-type=\"submit\">搜索</a-button>\n        <a-button style=\"margin-left: 8px\" @click=\"resetSearch\">重置</a-button>\n        <a-button type=\"dashed\" style=\"margin-left: 8px\" @click=\"showAddModal\">添加用户</a-button>\n      </a-form-item>\n    </a-form>\n    \n    <!-- 添加用户模态框 -->\n    <a-modal\n      v-model:visible=\"addModalVisible\"\n      title=\"添加新用户\"\n      :confirm-loading=\"addLoading\"\n      ok-text=\"确认\"\n      cancel-text=\"取消\"\n      @ok=\"handleAdd\"\n      @cancel=\"handleAddCancel\"\n    >\n      <a-form :model=\"addUserForm\" layout=\"vertical\" ref=\"addFormRef\">\n        <a-form-item\n          label=\"账号\"\n          name=\"userAccount\"\n          :rules=\"[{ required: true, message: '请输入账号' }]\"\n        >\n          <a-input v-model:value=\"addUserForm.userAccount\" placeholder=\"请输入账号\" />\n        </a-form-item>\n        <a-form-item\n          label=\"用户名\"\n          name=\"userName\"\n          :rules=\"[{ required: true, message: '请输入用户名' }]\"\n        >\n          <a-input v-model:value=\"addUserForm.userName\" placeholder=\"请输入用户名\" />\n        </a-form-item>\n        <a-form-item label=\"头像URL\" name=\"userAvatar\">\n          <a-input v-model:value=\"addUserForm.userAvatar\" placeholder=\"请输入头像URL\" />\n        </a-form-item>\n        <a-form-item label=\"个人简介\" name=\"userProfile\">\n          <a-textarea\n            v-model:value=\"addUserForm.userProfile\"\n            placeholder=\"请输入个人简介\"\n            :auto-size=\"{ minRows: 3, maxRows: 5 }\"\n          />\n        </a-form-item>\n        <a-form-item\n          label=\"用户角色\"\n          name=\"userRole\"\n          :rules=\"[{ required: true, message: '请选择用户角色' }]\"\n        >\n          <a-select v-model:value=\"addUserForm.userRole\" placeholder=\"请选择角色\">\n            <a-select-option value=\"admin\">管理员</a-select-option>\n            <a-select-option value=\"user\">普通用户</a-select-option>\n          </a-select>\n        </a-form-item>\n      </a-form>\n    </a-modal>\n\n    <div style=\"margin-bottom: 16px\" />\n    \n    <!-- 表格 -->\n    <a-table\n      :columns=\"columns\"\n      :data-source=\"dataList\"\n      :pagination=\"pagination\"\n      :loading=\"loading\"\n      @change=\"doTableChange\"\n    >\n      <template #bodyCell=\"{ column, record }\">\n        <template v-if=\"column.dataIndex === 'userAvatar'\">\n          <a-image v-if=\"record.userAvatar\" :src=\"record.userAvatar\" :width=\"80\" />\n          <a-avatar v-else :size=\"80\" style=\"background-color: #1890ff\">\n            {{ record.userName?.charAt(0) || 'U' }}\n          </a-avatar>\n        </template>\n        <template v-else-if=\"column.dataIndex === 'userRole'\">\n          <a-tag :color=\"record.userRole === 'admin' ? 'green' : 'blue'\">\n            {{ record.userRole === 'admin' ? '管理员' : '普通用户' }}\n          </a-tag>\n        </template>\n        <template v-else-if=\"column.dataIndex === 'createTime'\">\n          {{ dayjs(record.createTime).format('YYYY-MM-DD HH:mm:ss') }}\n        </template>\n        <template v-else-if=\"column.key === 'action'\">\n          <a-space>\n            <a-button type=\"dashed\" size=\"small\" @click=\"showEditModal(record)\">编辑</a-button>\n            <a-button danger size=\"small\" @click=\"showDeleteConfirm(record.id)\">删除</a-button>\n          </a-space>\n        </template>\n      </template>\n    </a-table>\n\n    <!-- 编辑用户模态框 -->\n    <a-modal\n      v-model:visible=\"editModalVisible\"\n      :title=\"editModalTitle\"\n      :confirm-loading=\"editLoading\"\n      ok-text=\"保存\"\n      cancel-text=\"取消\"\n      @ok=\"handleEdit\"\n      @cancel=\"handleCancel\"\n    >\n      <a-form :model=\"updateUserForm\" layout=\"vertical\" ref=\"editFormRef\">\n        <a-form-item\n          label=\"用户名\"\n          name=\"userName\"\n          :rules=\"[{ required: true, message: '请输入用户名' }]\"\n        >\n          <a-input v-model:value=\"updateUserForm.userName\" placeholder=\"请输入用户名\" />\n        </a-form-item>\n        <a-form-item label=\"头像URL\" name=\"userAvatar\">\n          <a-input v-model:value=\"updateUserForm.userAvatar\" placeholder=\"请输入头像URL\" />\n        </a-form-item>\n        <a-form-item label=\"个人简介\" name=\"userProfile\">\n          <a-textarea\n            v-model:value=\"updateUserForm.userProfile\"\n            placeholder=\"请输入个人简介\"\n            :auto-size=\"{ minRows: 3, maxRows: 5 }\"\n          />\n        </a-form-item>\n        <a-form-item\n          label=\"用户角色\"\n          name=\"userRole\"\n          :rules=\"[{ required: true, message: '请选择用户角色' }]\"\n        >\n          <a-select v-model:value=\"updateUserForm.userRole\" placeholder=\"请选择角色\">\n            <a-select-option value=\"admin\">管理员</a-select-option>\n            <a-select-option value=\"user\">普通用户</a-select-option>\n          </a-select>\n        </a-form-item>\n      </a-form>\n    </a-modal>\n  </div>\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"</template>","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":24,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Z3qldCl2ho7xCwxIhi7cTTJWnFc","block_type":5,"heading3":{"elements":[{"text_run":{"content":"JS代码","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"UoeGd35MNoOWaaxbhItc4Ud6ncg","block_type":14,"code":{"elements":[{"text_run":{"content":"import { computed, onMounted, reactive, ref } from 'vue'\nimport {\n  deleteUserUsingPost,\n  getUserVoListPageUsingPost,\n  updateUserUsingPost,\n  addUserUsingPost,\n} from '@/api/userController'\nimport { message, Modal } from 'ant-design-vue'\nimport dayjs from 'dayjs'\nimport type { FormInstance } from 'ant-design-vue'\nimport { h } from 'vue'\nimport { SearchOutlined } from '@ant-design/icons-vue'\n\n// 模态框状态\nconst addModalVisible = ref(false)\nconst addLoading = ref(false)\nconst addFormRef = ref<FormInstance>()\nconst editModalVisible = ref(false)\nconst editModalTitle = ref('编辑用户')\nconst editLoading = ref(false)\nconst editFormRef = ref<FormInstance>()\nconst loading = ref(false)\n\n// 表格列定义\nconst columns = [\n  { title: 'ID', dataIndex: 'id', width: 200 },\n  { title: '账号', dataIndex: 'userAccount', width: 200 },\n  { title: '用户名', dataIndex: 'userName', width: 150 },\n  { title: '头像', dataIndex: 'userAvatar', width: 120 },\n  { title: '简介', dataIndex: 'userProfile', ellipsis: true },\n  { title: '用户角色', dataIndex: 'userRole', width: 120 },\n  { title: '创建时间', dataIndex: 'createTime', width: 180 },\n  { title: '操作', key: 'action', width: 150 }\n]\n\n// 数据状态\nconst dataList = ref([])\nconst total = ref(0)\nconst searchParams = reactive({\n  current: 1,\n  pageSize: 10,\n  sortField: 'createTime',\n  sortOrder: 'descend',\n  userAccount: '',\n  userName: '',\n  userRole: ''\n})\n\n// 表单数据模型\nconst updateUserForm = reactive({\n  id: '',\n  userName: '',\n  userAvatar: '',\n  userProfile: '',\n  userRole: ''\n})\n\nconst addUserForm = reactive({\n  userName: '',\n  userAccount: '',\n  userAvatar: '',\n  userProfile: '',\n  userRole: ''\n})\n\n// 获取用户列表数据\nconst fetchData = async () => {\n  try {\n    loading.value = true\n    const res = await getUserVoListPageUsingPost(searchParams)\n    if (res.data.code === 0 && res.data.data) {\n      dataList.value = res.data.data.records || []\n      total.value = res.data.data.total || 0\n    } else {\n      message.error('获取数据失败: ' + (res.data.message || '未知错误'))\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Fetch data error:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 显示添加用户模态框\nconst showAddModal = () => {\n  addModalVisible.value = true\n}\n\n// 处理添加用户\nconst handleAdd = async () => {\n  try {\n    await addFormRef.value?.validate()\n    addLoading.value = true\n    const res = await addUserUsingPost(addUserForm)\n    if (res.data.code === 0) {\n      message.success('添加用户成功')\n      addModalVisible.value = false\n      addFormRef.value?.resetFields()\n      fetchData()\n    } else {\n      message.error('添加失败: ' + (res.data.message || '未知错误'))\n    }\n  } catch (error) {\n    console.error('Add user error:', error)\n    if (error instanceof Error) {\n      message.error('添加失败: ' + error.message)\n    }\n  } finally {\n    addLoading.value = false\n  }\n}\n\n// 取消添加\nconst handleAddCancel = () => {\n  addModalVisible.value = false\n  addFormRef.value?.resetFields()\n}\n\n// 显示编辑用户模态框\nconst showEditModal = (record) => {\n  editModalTitle.value = `编辑用户 - ${record.userName}`\n  Object.assign(updateUserForm, {\n    id: record.id,\n    userName: record.userName,\n    userAvatar: record.userAvatar,\n    userProfile: record.userProfile,\n    userRole: record.userRole\n  })\n  editModalVisible.value = true\n}\n\n// 处理编辑用户\nconst handleEdit = async () => {\n  try {\n    await editFormRef.value?.validate()\n    editLoading.value = true\n    const res = await updateUserUsingPost(updateUserForm)\n    if (res.data.code === 0) {\n      message.success('更新成功')\n      editModalVisible.value = false\n      fetchData()\n    } else {\n      message.error('更新失败: ' + (res.data.message || '未知错误'))\n    }\n  } catch (error) {\n    console.error('Update error:', error)\n  } finally {\n    editLoading.value = false\n  }\n}\n\n// 取消编辑\nconst handleCancel = () => {\n  editModalVisible.value = false\n  editFormRef.value?.resetFields()\n}\n\n// 显示删除确认对话框\nconst showDeleteConfirm = (id) => {\n  Modal.confirm({\n    title: '确认删除',\n    content: '确定要删除该用户吗？此操作不可撤销！',\n    okText: '确认',\n    okType: 'danger',\n    cancelText: '取消',\n    onOk: () => doDelete(id)\n  })\n}\n\n// 处理删除用户\nconst doDelete = async (id) => {\n  try {\n    loading.value = true\n    const res = await deleteUserUsingPost({ id })\n    if (res.data.code === 0) {\n      message.success('删除成功')\n      fetchData()\n    } else {\n      message.error('删除失败: ' + (res.data.message || '未知错误'))\n    }\n  } catch (error) {\n    message.error('网络错误，请稍后重试')\n    console.error('Delete error:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// 搜索用户\nconst doSearch = () => {\n  searchParams.current = 1\n  fetchData()\n}\n\n// 重置搜索条件\nconst resetSearch = () => {\n  Object.assign(searchParams, {\n    userAccount: undefined,\n    userName: undefined,\n    userRole: undefined,\n    current: 1\n  })\n  fetchData()\n}\n\n// 表格分页排序处理\nconst doTableChange = (page) => {\n  searchParams.current = page.current\n  searchParams.pageSize = page.pageSize\n  fetchData()\n}\n\n// 计算分页配置\nconst pagination = computed(() => ({\n  current: searchParams.current,\n  pageSize: searchParams.pageSize,\n  total: total.value,\n  showSizeChanger: true,\n  showQuickJumper: true,\n  showTotal: (total) => `共 ${total} 条`\n}))\n\n// 页面挂载时获取数据\nonMounted(() => {\n  fetchData()\n","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"})","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"language":30,"wrap":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"N3BFdjgpboXdGFx2NBXcE9yOnag","block_type":5,"heading3":{"elements":[{"text_run":{"content":"技术详解","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"ZXBMdELcyoLJ5exhZ4Hcme9Vn8d","block_type":6,"heading4":{"elements":[{"text_run":{"content":"核心功能点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"BFMCd7putoBBPGxje7vcHuVTnnc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户列表展示","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过表格展示用户信息，支持分页、排序和条件搜索  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"X2LNdjZFEoVflSx1cCaciOgOnBY","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户添加","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过模态框表单添加新用户，包含必填字段验证  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"BbppdLfCvouz9vxeXlzcBn4LnjW","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户编辑","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：支持修改用户基本信息（用户名、头像、简介、角色）  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"IqaedGdzpoFTkYxyVxCcAxexnig","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户删除","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：通过确认对话框删除用户，操作不可逆  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"MjiZdGH1roY0QTxhaqLcmYmJn7c","block_type":12,"bullet":{"elements":[{"text_run":{"content":"条件搜索","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：支持按账号、用户名、用户角色筛选用户列表  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"Nq2bdYAs7omxpjxMdBccKDX5nEb","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"YBZWd8H2doRnzqxdX27c9rBinWb","block_type":6,"heading4":{"elements":[{"text_run":{"content":"技术要点","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"WWz7dcxzUoQZLGxGQJgcDyLTnlh","block_type":12,"bullet":{"elements":[{"text_run":{"content":"数据获取与分页","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["FmUJdj7a8ouM9dxNM1LcS3rVnlh","C6pCd0CMIoIN6VxNCtwcSmh6n2g","COU1dHnKxozbVnxrU1Dco3shnwh"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"FmUJdj7a8ouM9dxNM1LcS3rVnlh","block_type":12,"bullet":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"getUserVoListPageUsingPost","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"接口获取用户列表，支持分页、排序和条件查询  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"WWz7dcxzUoQZLGxGQJgcDyLTnlh"},{"block_id":"C6pCd0CMIoIN6VxNCtwcSmh6n2g","block_type":12,"bullet":{"elements":[{"text_run":{"content":"通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"searchParams","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"响应式对象管理搜索条件和分页参数  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"WWz7dcxzUoQZLGxGQJgcDyLTnlh"},{"block_id":"COU1dHnKxozbVnxrU1Dco3shnwh","block_type":12,"bullet":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"computed","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"计算属性动态生成表格分页配置  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"WWz7dcxzUoQZLGxGQJgcDyLTnlh"},{"block_id":"XMHldnqAkojhTnx85zvcyTw7nve","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"M27hdVOCGoLZAvxP9gKcaMiKnwg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"表单验证与处理","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["AObkd13M0o3zacxF3S6c1J7hnuM","JnQZd4zWQoWwhBxmtyIc7Y7lnRf","MaPSdNy44oUDrbxXqAMcgmCnnke"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"AObkd13M0o3zacxF3S6c1J7hnuM","block_type":12,"bullet":{"elements":[{"text_run":{"content":"添加和编辑表单使用Ant Design Vue的","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"a-form","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"组件，通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"rules","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"属性定义必填字段验证  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"M27hdVOCGoLZAvxP9gKcaMiKnwg"},{"block_id":"JnQZd4zWQoWwhBxmtyIc7Y7lnRf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"表单提交前调用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"validate()","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"方法进行字段校验，避免无效数据提交  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"M27hdVOCGoLZAvxP9gKcaMiKnwg"},{"block_id":"MaPSdNy44oUDrbxXqAMcgmCnnke","block_type":12,"bullet":{"elements":[{"text_run":{"content":"提交成功后重置表单并刷新数据列表  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"M27hdVOCGoLZAvxP9gKcaMiKnwg"},{"block_id":"P3uEdKIgxowkscx4E5gcnmY3nOf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"VzBkdxEOroFJONxM0WNcwY5wnaf","block_type":12,"bullet":{"elements":[{"text_run":{"content":"模态框交互","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["GqPhdk02DoPqFxxkkpDcOw9knQd","OqnmdYhTkoJdtvxxPaIcfKEfnog","MEPVdb7rvocXwNxtKJTc08VgnOc"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"GqPhdk02DoPqFxxkkpDcOw9knQd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"添加和编辑功能通过模态框实现，避免页面跳转影响用户体验  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"VzBkdxEOroFJONxM0WNcwY5wnaf"},{"block_id":"OqnmdYhTkoJdtvxxPaIcfKEfnog","block_type":12,"bullet":{"elements":[{"text_run":{"content":"使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"v-model:visible","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"控制模态框显示/隐藏，通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"ref","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"引用操作表单实例  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"VzBkdxEOroFJONxM0WNcwY5wnaf"},{"block_id":"MEPVdb7rvocXwNxtKJTc08VgnOc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"编辑模态框根据当前用户数据动态设置标题和表单初始值  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"VzBkdxEOroFJONxM0WNcwY5wnaf"},{"block_id":"Rg0VdGBXdoll1hxRVdeccPDdnJh","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"CWFcdQTsEoupkNxYzI5c9TLan6f","block_type":12,"bullet":{"elements":[{"text_run":{"content":"表格数据渲染","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["XiVtdsPP4oN80LxZIfScZGoin4f","NQQhdCiCxoSG3UxO60AcakYunMc","Bd8FdARZtoSuBcxtwvDcjH9fnle","XDf4dpCNkoX6vexZgqKcpUPKnNc"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"XiVtdsPP4oN80LxZIfScZGoin4f","block_type":12,"bullet":{"elements":[{"text_run":{"content":"通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"columns","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"数组定义表格列，使用模板插槽自定义特殊列渲染  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CWFcdQTsEoupkNxYzI5c9TLan6f"},{"block_id":"NQQhdCiCxoSG3UxO60AcakYunMc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"头像列根据是否存在头像URL显示图片或默认头像  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CWFcdQTsEoupkNxYzI5c9TLan6f"},{"block_id":"Bd8FdARZtoSuBcxtwvDcjH9fnle","block_type":12,"bullet":{"elements":[{"text_run":{"content":"角色列使用标签组件根据角色类型显示不同颜色  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CWFcdQTsEoupkNxYzI5c9TLan6f"},{"block_id":"XDf4dpCNkoX6vexZgqKcpUPKnNc","block_type":12,"bullet":{"elements":[{"text_run":{"content":"时间列使用dayjs库格式化时间戳为可读格式  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"CWFcdQTsEoupkNxYzI5c9TLan6f"},{"block_id":"HyZydOuTJoa2yJxDmNTc8cDXnIf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"MXKhdjx6ootOQixu0z5cFquYnxd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"用户操作安全","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["V8Lpdk8KEoRKW9xj6KbczcZ8nsd","GEoJdF1weojJ7hx0wz4cPOZhnDb","Fimad9NEtoQjPexSaUKcWdben1e"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"V8Lpdk8KEoRKW9xj6KbczcZ8nsd","block_type":12,"bullet":{"elements":[{"text_run":{"content":"删除操作通过确认对话框二次确认，防止误操作  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXKhdjx6ootOQixu0z5cFquYnxd"},{"block_id":"GEoJdF1weojJ7hx0wz4cPOZhnDb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"所有API操作都包含错误处理，通过","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"message","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"组件反馈操作结果  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXKhdjx6ootOQixu0z5cFquYnxd"},{"block_id":"Fimad9NEtoQjPexSaUKcWdben1e","block_type":12,"bullet":{"elements":[{"text_run":{"content":"加载状态控制（","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"loading","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"）防止重复提交和提升用户体验  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"MXKhdjx6ootOQixu0z5cFquYnxd"},{"block_id":"G45xdpWXXoX3foxxfD0clZm0nqf","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}},{"block_id":"Y5kKd6Rq4oeoxLxWz5fcElgwndO","block_type":12,"bullet":{"elements":[{"text_run":{"content":"响应式设计","text_element_style":{"bold":true,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"：  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"children":["M5PidqMlBohu5kxZn8kcYagJnsb","HGImd5yDXorXS4xJJ1kcwOvAnXb","K8j9dSAiaopKRpxsVBnc7as1nHg"],"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg"},{"block_id":"M5PidqMlBohu5kxZn8kcYagJnsb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"搜索表单使用","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"layout=\"inline\"","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"在小屏幕下自动换行  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Y5kKd6Rq4oeoxLxWz5fcElgwndO"},{"block_id":"HGImd5yDXorXS4xJJ1kcwOvAnXb","block_type":12,"bullet":{"elements":[{"text_run":{"content":"表格列定义宽度和","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"ellipsis","text_element_style":{"bold":false,"inline_code":true,"italic":false,"strikethrough":false,"underline":false}}},{"text_run":{"content":"属性优化不同屏幕下的显示效果  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Y5kKd6Rq4oeoxLxWz5fcElgwndO"},{"block_id":"K8j9dSAiaopKRpxsVBnc7as1nHg","block_type":12,"bullet":{"elements":[{"text_run":{"content":"页面整体使用内边距和间距保证内容可读性  ","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}},"parent_id":"Y5kKd6Rq4oeoxLxWz5fcElgwndO"},{"block_id":"LT5sdfVhhoDe1PxuRWacmSzsnbg","block_type":2,"parent_id":"MXN4dPCpVoi3XGxqTv3cplntnYg","text":{"elements":[{"text_run":{"content":"","text_element_style":{"bold":false,"inline_code":false,"italic":false,"strikethrough":false,"underline":false}}}],"style":{"align":1,"folded":false}}}],"type":"docx"}